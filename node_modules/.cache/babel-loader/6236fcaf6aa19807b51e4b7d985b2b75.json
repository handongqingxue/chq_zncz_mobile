{"ast":null,"code":"import \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport ProgramConfig from '../programConfig.json';\nimport Axios from \"axios\"; // const api=\"http://116.62.163.143:81/stdempinfo/\"\n\nvar _api = ProgramConfig.hydrocarbonServer; //加载本地配置\n\nAxios.create().get('programConfig.json').then(function (result) {\n  window.localStorage['hydrocarbonServer'] = result.data.hydrocarbonServer;\n}).catch(function (error) {\n  console.log(error);\n});\nexport default {\n  api: function api() {\n    return window.localStorage['hydrocarbonServer'] ? window.localStorage['hydrocarbonServer'] : _api;\n  },\n  formateDate: function formateDate(time) {\n    if (!time) return '';\n    var date = new Date(time);\n    return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();\n  },\n  dateToString: function dateToString(date) {\n    //日期转字符串\n    console.log(date);\n    var year = date.getFullYear();\n    var month = (date.getMonth() + 1).toString();\n    var day = date.getDate().toString();\n\n    if (month.length === 1) {\n      month = \"0\" + month;\n    }\n\n    if (day.length === 1) {\n      day = \"0\" + day;\n    }\n\n    var dateTime = year + \"-\" + month + \"-\" + day;\n    return dateTime;\n  },\n  uniq: function uniq(array) {\n    //去重\n    var temp = [];\n    var index = [];\n    var l = array.length;\n\n    for (var i = 0; i < l; i++) {\n      for (var j = i + 1; j < l; j++) {\n        if (array[i] === array[j]) {\n          i++;\n          j = i;\n        }\n      }\n\n      temp.push(array[i]);\n      index.push(i);\n    }\n\n    return temp;\n  },\n  downloadFile: function downloadFile(url) {\n    try {\n      var elemIF = document.createElement(\"iframe\");\n      elemIF.src = url;\n      elemIF.style.display = \"none\";\n      document.body.appendChild(elemIF);\n    } catch (e) {\n      _Toast.error(e);\n    }\n  },\n  setCookie: function setCookie(cname, cvalue, exdays) {\n    var d = new Date();\n    d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n    var expires = \"expires=\" + d.toGMTString();\n    document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n  },\n  getCookie: function getCookie(cname) {\n    var name = cname + \"=\";\n    var ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i].trim();\n      if (c.indexOf(name) === 0) return c.substring(name.length, c.length);\n    }\n\n    return \"\";\n  },\n  delCookie: function delCookie(cname) {\n    var exp = new Date();\n    exp.setTime(exp.getTime() - 1);\n    var cval = this.getCookie(cname);\n    if (cval != null) document.cookie = cname + \"=\" + cval + \";expires=\" + exp.toGMTString();\n  },\n  //随机数\n  RndNum: function RndNum(n) {\n    var rnd = \"\";\n\n    for (var i = 0; i < n; i++) {\n      rnd += Math.floor(Math.random() * 10);\n    }\n\n    return rnd;\n  },\n  setLocalStorge: function setLocalStorge(key, value, min) {\n    // 设置过期原则\n    if (!value) {\n      localStorage.removeItem(key);\n    } else {\n      var Min = min || 30; // 默认保留30分钟\n\n      var exp = new Date();\n      localStorage[key] = JSON.stringify({\n        value: value,\n        expires: exp.getTime() + Min * 60 * 1000\n      });\n    }\n  },\n  getLocalStorge: function getLocalStorge(name) {\n    try {\n      var o = JSON.parse(localStorage[name]);\n\n      if (!o || o.expires < Date.now()) {\n        return null;\n      } else {\n        return o.value;\n      }\n    } catch (e) {\n      // 兼容其他localstorage\n      return localStorage[name];\n    } finally {}\n  },\n  queryParams: function queryParams(data) {\n    var isPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var prefix = isPrefix ? '?' : '';\n    var _result = [];\n\n    var _loop = function _loop(key) {\n      var value = data[key]; // 去掉为空的参数\n\n      if (['', undefined, null].includes(value)) {\n        return \"continue\";\n      }\n\n      if (value.constructor === Array) {\n        value.forEach(function (_value) {\n          _result.push(encodeURI(key) + '[]=' + encodeURI(_value));\n        });\n      } else {\n        var str = encodeURI(key).replace(\"criteria\", \"c\");\n\n        _result.push(str + '=' + encodeURI(value));\n      }\n    };\n\n    for (var key in data) {\n      var _ret = _loop(key);\n\n      if (_ret === \"continue\") continue;\n    }\n\n    return _result.length ? prefix + _result.join('&') : '';\n  },\n  urlToObj: function urlToObj(str) {\n    var obj = {};\n    var arr1 = str.split(\"?\");\n    var arr2 = arr1[1].split(\"&\");\n\n    for (var i = 0; i < arr2.length; i++) {\n      var res = arr2[i].split(\"=\");\n\n      var _str = res[0].replace(\"c\", \"criteria\");\n\n      obj[_str] = res[1];\n    }\n\n    alert(obj);\n    return obj;\n  },\n  uniqWord: function uniqWord(array, gWord) {\n    var res = [];\n    array.map(function (item) {\n      var flag = true;\n      res.map(function (it) {\n        if (item[gWord] === it[gWord]) {\n          flag = false;\n        }\n\n        return false;\n      });\n\n      if (flag) {\n        res.push(item);\n      }\n\n      return false;\n    });\n    return res;\n  },\n  forPic: function forPic(fieldMap) {\n    //原始数据的图片url转化为图片\n    for (var i in fieldMap) {\n      if (fieldMap[i] && typeof fieldMap[i] === \"string\" && fieldMap[i].includes(\"download-files\")) {\n        fieldMap[i] = _api + fieldMap[i];\n      }\n    }\n\n    return fieldMap;\n  }\n};","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/units/index.js"],"names":["ProgramConfig","Axios","api","hydrocarbonServer","create","get","then","result","window","localStorage","data","catch","error","console","log","formateDate","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","dateToString","year","month","toString","day","length","dateTime","uniq","array","temp","index","l","i","j","push","downloadFile","url","elemIF","document","createElement","src","style","display","body","appendChild","e","setCookie","cname","cvalue","exdays","d","setTime","getTime","expires","toGMTString","cookie","getCookie","name","ca","split","c","trim","indexOf","substring","delCookie","exp","cval","RndNum","n","rnd","Math","floor","random","setLocalStorge","key","value","min","removeItem","Min","JSON","stringify","getLocalStorge","o","parse","now","queryParams","isPrefix","prefix","_result","undefined","includes","constructor","Array","forEach","_value","encodeURI","str","replace","join","urlToObj","obj","arr1","arr2","res","alert","uniqWord","gWord","map","item","flag","it","forPic","fieldMap"],"mappings":"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","sourcesContent":["import { Toast } from 'antd-mobile'\r\nimport ProgramConfig from '../programConfig.json'\r\nimport Axios from \"axios\";\r\n\r\n// const api=\"http://116.62.163.143:81/stdempinfo/\"\r\n const api=ProgramConfig.hydrocarbonServer;\r\n\r\n//加载本地配置\r\nAxios.create().get('programConfig.json').then((result) => {\r\n\twindow.localStorage['hydrocarbonServer'] = result.data.hydrocarbonServer\r\n}).catch((error) => { console.log(error) });\r\n\r\nexport default {\r\n\tapi(){\r\n\t\treturn window.localStorage['hydrocarbonServer']?window.localStorage['hydrocarbonServer']:api;\r\n\t},\r\n\tformateDate(time) {\r\n\t\tif(!time) return '';\r\n\t\tconst date = new Date(time);\r\n\t\treturn date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\r\n\t},\r\n\tdateToString(date) { //日期转字符串\r\n\t\tconsole.log(date)\r\n\t\tlet year = date.getFullYear();\r\n\t\tlet month = (date.getMonth() + 1).toString();\r\n\t\tlet day = (date.getDate()).toString();\r\n\t\tif(month.length === 1) {\r\n\t\t\tmonth = \"0\" + month;\r\n\t\t}\r\n\t\tif(day.length === 1) {\r\n\t\t\tday = \"0\" + day;\r\n\t\t}\r\n\t\tconst dateTime = year + \"-\" + month + \"-\" + day;\r\n\t\treturn dateTime;\r\n\t},\r\n\tuniq(array) { //去重\r\n\t\tvar temp = [];\r\n\t\tvar index = [];\r\n\t\tvar l = array.length;\r\n\t\tfor(var i = 0; i < l; i++) {\r\n\t\t\tfor(var j = i + 1; j < l; j++) {\r\n\t\t\t\tif(array[i] === array[j]) {\r\n\t\t\t\t\ti++;\r\n\t\t\t\t\tj = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttemp.push(array[i]);\r\n\t\t\tindex.push(i);\r\n\t\t}\r\n\t\treturn temp;\r\n\t},\r\n\tdownloadFile(url) {\r\n\t\ttry {\r\n\t\t\tlet elemIF = document.createElement(\"iframe\");\r\n\t\t\telemIF.src = url;\r\n\t\t\telemIF.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(elemIF);\r\n\t\t} catch(e) {\r\n\t\t\tToast.error(e)\r\n\t\t}\r\n\t},\r\n\tsetCookie(cname, cvalue, exdays) {\r\n\t\tconst d = new Date();\r\n\t\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n\t\tconst expires = \"expires=\" + d.toGMTString();\r\n\t\tdocument.cookie = cname + \"=\" + cvalue + \"; \" + expires;\r\n\t},\r\n\tgetCookie(cname) {\r\n\t\tconst name = cname + \"=\";\r\n\t\tconst ca = document.cookie.split(';');\r\n\t\tfor(let i = 0; i < ca.length; i++) {\r\n\t\t\tconst c = ca[i].trim();\r\n\t\t\tif(c.indexOf(name) === 0) return c.substring(name.length, c.length);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t},\r\n\tdelCookie(cname) {\r\n\t\tconst exp = new Date();\r\n\t\texp.setTime(exp.getTime() - 1);\r\n\t\tconst cval = this.getCookie(cname);\r\n\t\tif(cval != null)\r\n\t\t\tdocument.cookie = cname + \"=\" + cval + \";expires=\" + exp.toGMTString();\r\n\t},\r\n\t//随机数\r\n\tRndNum(n) {\r\n\t\tlet rnd = \"\";\r\n\t\tfor(let i = 0; i < n; i++)\r\n\t\t\trnd += Math.floor(Math.random() * 10);\r\n\t\treturn rnd;\r\n\t},\r\n\tsetLocalStorge(key, value, min) {\r\n\t\t// 设置过期原则\r\n\t\tif(!value) {\r\n\t\t\tlocalStorage.removeItem(key)\r\n\t\t} else {\r\n\t\t\tconst Min = min || 30; // 默认保留30分钟\r\n\t\t\tconst exp = new Date();\r\n\t\t\tlocalStorage[key] = JSON.stringify({\r\n\t\t\t\tvalue,\r\n\t\t\t\texpires: exp.getTime() + Min * 60 * 1000\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tgetLocalStorge(name) {\r\n\t\ttry {\r\n\t\t\tlet o = JSON.parse(localStorage[name])\r\n\t\t\tif(!o || o.expires < Date.now()) {\r\n\t\t\t\treturn null\r\n\t\t\t} else {\r\n\t\t\t\treturn o.value\r\n\t\t\t}\r\n\t\t} catch(e) {\r\n\t\t\t// 兼容其他localstorage\r\n\t\t\treturn localStorage[name]\r\n\t\t} finally {}\r\n\t},\r\n\tqueryParams(data, isPrefix = false) {\r\n\t\tlet prefix = isPrefix ? '?' : ''\r\n\t\tlet _result = []\r\n\t\tfor(let key in data) {\r\n\t\t\tlet value = data[key]\r\n\t\t\t// 去掉为空的参数\r\n\t\t\tif(['', undefined, null].includes(value)) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tif(value.constructor === Array) {\r\n\t\t\t\tvalue.forEach(_value => {\r\n\t\t\t\t\t_result.push(encodeURI(key) + '[]=' + encodeURI(_value))\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconst str = encodeURI(key).replace(\"criteria\", \"c\")\r\n\t\t\t\t_result.push(str + '=' + encodeURI(value))\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn _result.length ? prefix + _result.join('&') : ''\r\n\t},\r\n\turlToObj(str) {\r\n\t\tlet obj = {};\r\n\t\tconst arr1 = str.split(\"?\");\r\n\t\tconst arr2 = arr1[1].split(\"&\");\r\n\t\tfor(let i = 0; i < arr2.length; i++) {\r\n\t\t\tconst res = arr2[i].split(\"=\");\r\n\t\t\tconst str = res[0].replace(\"c\", \"criteria\")\r\n\t\t\tobj[str] = res[1];\r\n\t\t}\r\n\t\talert(obj)\r\n\t\treturn obj;\r\n\t},\r\n\tuniqWord(array,gWord){\r\n\t\tconst res=[]\r\n\t\tarray.map((item)=>{\r\n\t\t\tlet flag = true;\r\n\t\t\tres.map((it)=>{\r\n\t\t\t\tif(item[gWord]===it[gWord]){\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\tif(flag){\r\n\t\t\t\tres.push(item);\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t})\r\n\t\treturn res \r\n\t},\r\n\tforPic(fieldMap){ //原始数据的图片url转化为图片\r\n\t\tfor(let i in fieldMap){\r\n\t\t\tif(fieldMap[i] && typeof fieldMap[i]===\"string\" && fieldMap[i].includes(\"download-files\")){\r\n\t\t\t\tfieldMap[i]=api+ fieldMap[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fieldMap\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}