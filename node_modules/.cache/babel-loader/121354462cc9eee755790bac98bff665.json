{"ast":null,"code":"import \"antd-mobile/es/button/style\";\nimport _Button from \"antd-mobile/es/button\";\nimport \"antd-mobile/es/activity-indicator/style\";\nimport _ActivityIndicator from \"antd-mobile/es/activity-indicator\";\nimport \"antd-mobile/es/list/style\";\nimport _List from \"antd-mobile/es/list\";\nimport \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _toConsumableArray from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd-mobile/es/modal/style\";\nimport _Modal from \"antd-mobile/es/modal\";\nimport \"antd-mobile/es/popover/style\";\nimport _Popover from \"antd-mobile/es/popover\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\src\\\\pages\\\\details\\\\index.js\";\nimport React, { Component } from 'react';\nimport { createForm } from 'rc-form';\nimport Nav from './../../components/Nav';\nimport Super from './../../super';\nimport FormCard from './../../components/FormCard';\nimport Units from './../../units';\nimport TemplateDrawer from './../../components/TemplateDrawer';\nimport EditList from './../../components/FormCard/editList';\nimport RabcTemplateDrawer from './../../components/RabcTemplateDrawer';\nimport Storage from './../../units/storage';\nimport './index.less';\nvar Itempop = _Popover.Item;\nvar alert = _Modal.alert;\n\nvar Details = /*#__PURE__*/function (_Component) {\n  _inherits(Details, _Component);\n\n  function Details() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Details);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Details)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      itemList: [],\n      optionsMap: {},\n      animating: false,\n      headerName: \"\",\n      visibleNav: false,\n      scrollIds: [],\n      premises: [],\n      isDrawer: _this.props.match ? false : true,\n      menuId: _this.props.match ? _this.props.match.params.menuId : _this.props.menuId,\n      code: _this.props.match ? _this.props.match.params.code : _this.props.code,\n      fieldGroupId: _this.props.match ? null : _this.props.fieldGroupId\n    };\n\n    _this.handleScroll = function () {\n      var scrollIds = _this.state.scrollIds;\n      var scrollY = window.scrollY;\n      var mainTopArr = [];\n      var k = 0;\n\n      if (scrollIds) {\n        // 滑动锁定导航\n        for (var i = 0; i < scrollIds.length; i++) {\n          var node = document.getElementById(scrollIds[i]);\n\n          if (node) {\n            var top = Math.floor(node.offsetTop);\n            mainTopArr.push(top);\n          }\n        }\n\n        mainTopArr.sort(function (a, b) {\n          return a - b;\n        }); // 排序\n\n        var fixedDiv = document.getElementsByClassName(\"fixedDiv\");\n\n        for (var _i = 0; _i < mainTopArr.length; _i++) {\n          if (scrollY + 45 > mainTopArr[_i]) {\n            k = _i;\n\n            for (var _i2 = 0; _i2 < fixedDiv.length; _i2++) {\n              fixedDiv[_i2].style.display = \"none\";\n            }\n\n            fixedDiv[k].style.display = \"block\";\n          }\n\n          if (scrollY <= 5) {\n            k = -1;\n\n            for (var _i3 = 0; _i3 < fixedDiv.length; _i3++) {\n              fixedDiv[_i3].style.display = \"none\";\n            }\n          }\n        }\n      }\n\n      var lis = document.getElementsByClassName(\"am-list-header\");\n\n      if (lis && mainTopArr.length > 0) {\n        for (var _i4 = 0; _i4 < lis.length; _i4++) {\n          lis[_i4].style.position = \"static\";\n        }\n\n        if (k >= 0) {\n          lis[k].style.position = \"fixed\";\n          lis[k].style.top = \"45px\";\n          lis[k].style.zIndex = \"78\";\n          lis[k].style.background = \"#F5F5F9\";\n        }\n      }\n    };\n\n    _this.loadRequest = function () {\n      var _this$state = _this.state,\n          menuId = _this$state.menuId,\n          fieldGroupId = _this$state.fieldGroupId;\n\n      _this.setState({\n        animating: true\n      });\n\n      var url;\n\n      if (fieldGroupId) {\n        url = \"api2/meta/tmpl/\".concat(menuId, \"/dtmpl/rabc/\").concat(fieldGroupId);\n      } else {\n        url = \"api2/meta/tmpl/\".concat(menuId, \"/dtmpl/normal/\");\n      }\n\n      Super.super({\n        url: url,\n        method: \"GET\"\n      }).then(function (res) {\n        var premises = res.config.premises;\n        var menuTitle = res.menu ? res.menu.title : null;\n        var scrollIds = _this.state.scrollIds;\n\n        if (premises && premises.length > 0) {\n          scrollIds.push(\"默认字段（不可修改）\");\n\n          _this.setState({\n            premises: premises,\n            scrollIds: scrollIds\n          });\n        }\n\n        var dtmplGroup = _this.requestSelect(res.config.dtmpl.groups);\n\n        _this.loadData(dtmplGroup, menuTitle);\n      });\n    };\n\n    _this.loadData = function (dtmplGroup, menuTitle) {\n      var _this$state2 = _this.state,\n          menuId = _this$state2.menuId,\n          code = _this$state2.code,\n          fieldGroupId = _this$state2.fieldGroupId;\n\n      if (code) {\n        Super.super({\n          url: \"api2/entity/\".concat(menuId, \"/detail/\").concat(code),\n          method: 'GET',\n          data: {\n            fieldGroupId: fieldGroupId\n          }\n        }).then(function (resi) {\n          var fieldMap = Units.forPic(resi.entity.fieldMap);\n          var arrayMap = resi.entity.arrayMap;\n          var dataTitle = resi.entity.title;\n\n          for (var i in arrayMap) {\n            arrayMap[i].forEach(function (item) {\n              item.fieldMap.code = item.code;\n            });\n          }\n\n          _this.loadDataToList(dtmplGroup, fieldMap, arrayMap);\n\n          _this.setState({\n            headerName: \"\".concat(menuTitle, \"-\").concat(dataTitle, \"-\\u8BE6\\u60C5\")\n          });\n        });\n      } else {\n        _this.loadDataToList(dtmplGroup); // 没有code，就是创建，没有值\n\n\n        _this.setState({\n          headerName: menuId === \"user\" ? \"用户\" : \"\".concat(menuTitle, \"-\\u521B\\u5EFA\")\n        });\n      }\n    };\n\n    _this.loadDataToList = function (dtmplGroup, fieldMap, arrayMap) {\n      dtmplGroup.forEach(function (item) {\n        var flag = false; // 是否添加关系\n\n        var relaOptions = [];\n\n        if (item.composite) {\n          var model = item.fields;\n          var totalname = item.composite.cname;\n          item.lists = [];\n          item.limitLen = 1;\n\n          for (var k in arrayMap) {\n            if (k === item.id.toString()) {\n              var _item$lists;\n\n              (_item$lists = item.lists).push.apply(_item$lists, _toConsumableArray(arrayMap[k]));\n            }\n          }\n\n          if (item.composite.addType === 5) {\n            flag = true;\n            item.composite.relationSubdomain.forEach(function (item) {\n              var list = {\n                title: item,\n                value: item,\n                label: item\n              };\n              relaOptions.push(list);\n            });\n          }\n\n          item.lists.forEach(function (it, index) {\n            it.list = [];\n            var deletebtn = {\n              type: \"deletebtn\",\n              code: it.code,\n              name: \"deletebtn[\".concat(index, \"]\")\n            };\n            it.list.push(deletebtn);\n\n            if (flag) {\n              var relation = {\n                type: \"relation\",\n                value: it.relationLabel,\n                title: \"关系\",\n                fieldId: item.composite.c_id,\n                validators: \"required\",\n                name: \"\".concat(totalname, \"[\").concat(index, \"].\\u5173\\u7CFB\"),\n                relationSubdomain: relaOptions\n              };\n              it.list.push(relation);\n            }\n\n            var _loop = function _loop(_k) {\n              model.forEach(function (i) {\n                if (_k === i.id.toString()) {\n                  var lastname = i.name.split(\".\")[1];\n                  var record = {\n                    name: \"\".concat(totalname, \"[\").concat(index, \"].\").concat(lastname),\n                    title: i.title,\n                    type: i.type,\n                    validators: i.validators,\n                    fieldId: i.fieldId,\n                    value: it.fieldMap[_k],\n                    code: it.fieldMap.code,\n                    fieldAvailable: it.fieldAvailable\n                  };\n                  it.list.push(Units.forPic(record));\n                }\n              });\n            };\n\n            for (var _k in it.fieldMap) {\n              _loop(_k);\n            }\n          });\n        } else {\n          item.limitLen = 4;\n          item.fields.forEach(function (it) {\n            for (var _k2 in fieldMap) {\n              if (it.id.toString() === _k2) {\n                it.value = fieldMap[_k2];\n              }\n            }\n          });\n        }\n      });\n    };\n\n    _this.requestSelect = function (dtmplGroup) {\n      var scrollIds = _this.state.scrollIds;\n      var selectId = [];\n      dtmplGroup.forEach(function (item) {\n        item.fields.forEach(function (it) {\n          if (it.type === \"select\" || it.type === \"label\") {\n            selectId.push(it.fieldId);\n          }\n        });\n      });\n      dtmplGroup.forEach(function (item) {\n        scrollIds.push(item.title);\n      });\n\n      if (selectId.length > 0) {\n        Super.super({\n          url: \"api2/meta/dict/field_options\",\n          data: {\n            fieldIds: selectId.join(',')\n          }\n        }).then(function (res) {\n          var optionsMap = res.optionsMap;\n\n          for (var k in optionsMap) {\n            if (optionsMap[k] != null) {\n              optionsMap[k].forEach(function (item) {\n                item.label = item.title;\n              });\n            }\n          }\n\n          _this.setState({\n            optionsMap: optionsMap,\n            scrollIds: scrollIds,\n            dtmplGroup: dtmplGroup,\n            animating: false\n          });\n        });\n      } else {\n        _this.setState({\n          scrollIds: scrollIds,\n          dtmplGroup: dtmplGroup,\n          animating: false\n        });\n      }\n\n      return dtmplGroup;\n    };\n\n    _this.addList = function (list) {\n      var dtmplGroup = _this.state.dtmplGroup;\n      var record = [];\n      var relaOptions = [];\n      var flag = false; // 是否添加关系\n\n      var totalname = list.composite.cname;\n      var code = Units.RndNum(9);\n      var len = list.lists.length;\n\n      if (list.composite) {\n        var deletebtn = {\n          type: \"deletebtn\",\n          code: code,\n          name: \"deletebtn[\".concat(len, \"]\")\n        };\n        record.push(deletebtn);\n\n        if (list.composite.addType === 5) {\n          flag = true;\n          list.composite.relationSubdomain.forEach(function (item) {\n            var li = {\n              title: item,\n              label: item,\n              value: item\n            };\n            relaOptions.push(li);\n          });\n        }\n\n        if (flag) {\n          var _len2 = list.lists.length;\n          var relation = {\n            type: \"relation\",\n            value: relaOptions.length === 1 ? relaOptions[0].value : \"\",\n            title: \"关系\",\n            fieldId: list.composite.c_id,\n            validators: \"required\",\n            name: \"\".concat(totalname, \"[\").concat(_len2, \"].\\u5173\\u7CFB\"),\n            relationSubdomain: relaOptions\n          };\n          record.push(relation);\n        }\n      }\n\n      list.fields.forEach(function (item) {\n        var lastname = item.name.split(\".\")[1];\n        var re = {\n          code: code,\n          fieldAvailable: item.fieldAvailable,\n          fieldId: item.fieldId,\n          name: \"\".concat(totalname, \"[\").concat(len, \"].\").concat(lastname),\n          title: item.title,\n          type: item.type,\n          validators: item.validators,\n          value: item.value\n        };\n        record.push(re);\n      });\n      var res = {\n        list: record,\n        code: code\n      };\n      list.lists.unshift(res);\n      dtmplGroup.forEach(function (item, index) {\n        if (item.id === list.id) {\n          dtmplGroup.splice(index, list);\n        }\n      });\n\n      _this.setState({\n        dtmplGroup: dtmplGroup\n      });\n    };\n\n    _this.handleSubmit = function () {\n      var _this$state3 = _this.state,\n          code = _this$state3.code,\n          menuId = _this$state3.menuId,\n          dtmplGroup = _this$state3.dtmplGroup,\n          fieldGroupId = _this$state3.fieldGroupId;\n\n      _this.setState({\n        animating: true\n      });\n\n      _this.props.form.validateFields({\n        force: true\n      }, function (err, values) {\n        // 提交再次验证\n        if (!err) {\n          dtmplGroup.forEach(function (item) {\n            if (item.composite) {\n              values[\"\".concat(item.composite.cname, \".$$flag$$\")] = true;\n            }\n          });\n\n          for (var k in values) {\n            if (values[k] && values[k] instanceof Date) {\n              // 判断时间格式\n              values[k] = Units.dateToString(values[k]);\n            } else if (values[k] && typeof values[k] === \"object\" && Array.isArray(values[k])) {\n              (function () {\n                var totalName = k;\n                values[k].forEach(function (item, index) {\n                  for (var e in item) {\n                    if (e === \"关系\") {\n                      e = \"$$label$$\";\n                      values[\"\".concat(totalName, \"[\").concat(index, \"].\").concat(e)] = item[\"关系\"];\n                    } else if (e.indexOf(\"code\") > -1) {\n                      if (item[e]) {\n                        values[\"\".concat(totalName, \"[\").concat(index, \"].\\u552F\\u4E00\\u7F16\\u7801\")] = item[e];\n                      } else {\n                        delete item[e];\n                      }\n                    } else if (item[e] === undefined) {\n                      delete item[e]; // 删除未更改的图片数据\n                    } else {\n                      values[\"\".concat(totalName, \"[\").concat(index, \"].\").concat(e)] = item[e];\n                    }\n                  }\n                });\n                delete values[k]; // 删除原始的对象数据\n              })();\n            } else if (!values[k]) {\n              delete values[k];\n            }\n          }\n\n          console.log(values);\n          var formData = new FormData();\n          formData.append('唯一编码', code ? code : \"\");\n\n          for (var _k3 in values) {\n            formData.append(_k3, values[_k3]);\n          }\n\n          var url;\n\n          if (fieldGroupId) {\n            url = \"api2/entity/\".concat(menuId, \"/detail/rabc/\").concat(fieldGroupId);\n          } else {\n            url = \"api2/entity/\".concat(menuId, \"/detail/normal\");\n          }\n\n          Super.super({\n            url: url,\n            method: 'POST',\n            data: formData\n          }, 'formdata').then(function (res) {\n            _this.setState({\n              animating: false,\n              showRabcTempDrawer: false\n            });\n\n            if (res && res.status === \"suc\") {\n              _Toast.success(\"保存成功！\");\n\n              if (menuId !== \"user\") {\n                if (!_this.props.match) {\n                  _this.props.loadEntites(res.code, fieldGroupId);\n                } else {\n                  _this.props.history.push(\"/\".concat(menuId));\n                }\n              }\n            } else {\n              _Toast.fail(\"保存失败!\");\n            }\n          });\n        } else {\n          _Toast.fail(\"必填选项未填！！\");\n\n          _this.setState({\n            animating: false\n          });\n        }\n      });\n    };\n\n    _this.onRef = function (ref) {\n      _this.SelectTemplate = ref;\n    };\n\n    _this.loadTemplate = function (entities, addModal) {\n      entities.forEach(function (item) {\n        var _loop2 = function _loop2(k) {\n          addModal.fields.forEach(function (it) {\n            if (k === it.id.toString()) {\n              it.value = item.byDfieldIds[k];\n            }\n          });\n        };\n\n        for (var k in item.byDfieldIds) {\n          _loop2(k);\n        }\n\n        _this.addList(addModal);\n      });\n    };\n\n    _this.deleteList = function (code) {\n      var dtmplGroup = _this.state.dtmplGroup;\n      dtmplGroup.forEach(function (item) {\n        if (item.composite) {\n          item.lists = item.lists.filter(function (it) {\n            return it.code.includes(code) === false;\n          });\n        }\n      });\n\n      _Toast.success(\"删除成功！\");\n\n      _this.setState({\n        dtmplGroup: dtmplGroup\n      });\n    };\n\n    _this.showAlert = function (code, e) {\n      e.stopPropagation();\n      var alertInstance = alert('删除操作', '确认删除这条记录吗？', [{\n        text: '取消'\n      }, {\n        text: '确认',\n        onPress: function onPress() {\n          return _this.deleteList(code);\n        }\n      }]);\n      setTimeout(function () {\n        alertInstance.close();\n      }, 10000);\n    };\n\n    _this.handlePop = function (value) {\n      if (value === \"save\") {\n        _this.handleSubmit();\n      } else if (value === \"nav\") {\n        _this.handleNavAt();\n      } else {\n        _this.props.history.push(\"/\".concat(value));\n      }\n    };\n\n    _this.bodyScroll = function (e) {\n      e.preventDefault();\n    };\n\n    _this.handleNavAt = function () {\n      document.addEventListener('touchmove', _this.bodyScroll, {\n        passive: false\n      });\n\n      _this.setState({\n        visibleNav: true\n      });\n    };\n\n    _this.scrollToAnchor = function (anchorName) {\n      // 导航\n      if (anchorName) {\n        var anchorElement = document.getElementById(anchorName);\n\n        if (anchorElement) {\n          window.scrollTo(0, anchorElement.offsetTop - 43);\n        }\n      }\n\n      _this.setState({\n        visibleNav: false\n      });\n\n      document.removeEventListener('touchmove', _this.bodyScroll, {\n        passive: false\n      });\n    };\n\n    _this.onClose = function () {\n      _this.setState({\n        visibleNav: false\n      });\n\n      document.removeEventListener('touchmove', _this.bodyScroll, {\n        passive: false\n      });\n    };\n\n    _this.seeMore = function (record, Num) {\n      // 折叠面板\n      var dtmplGroup = _this.state.dtmplGroup;\n      dtmplGroup.forEach(function (item) {\n        if (item.id === record.id) {\n          item.limitLen = Num;\n        }\n      });\n\n      _this.setState({\n        dtmplGroup: dtmplGroup\n      });\n    };\n\n    _this.editTemplate = function (isShowModal, code, groupId) {\n      _this.setState({\n        showRabcTempDrawer: isShowModal,\n        groupId: groupId,\n        tempCode: code\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Details, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.menuId === \"user\") {\n        this.props.onRef(this);\n      }\n\n      window.addEventListener('scroll', this.handleScroll);\n      this.loadRequest();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = Storage.menuList;\n      var getFieldProps = this.props.form.getFieldProps;\n      var _this$state4 = this.state,\n          dtmplGroup = _this$state4.dtmplGroup,\n          optionsMap = _this$state4.optionsMap,\n          animating = _this$state4.animating,\n          headerName = _this$state4.headerName,\n          menuId = _this$state4.menuId,\n          visibleNav = _this$state4.visibleNav,\n          scrollIds = _this$state4.scrollIds,\n          tempCode = _this$state4.tempCode,\n          premises = _this$state4.premises,\n          showRabcTempDrawer = _this$state4.showRabcTempDrawer,\n          groupId = _this$state4.groupId,\n          isDrawer = _this$state4.isDrawer;\n\n      if (premises && premises.length > 0 && dtmplGroup) {\n        dtmplGroup.forEach(function (item) {\n          if (!item.composite) {\n            item.fields.forEach(function (it) {\n              premises.forEach(function (i) {\n                i.type = \"text\";\n                i.value = i.fieldValue;\n                i.name = i.fieldName;\n                i.title = i.fieldTitle;\n                i.available = false;\n\n                if (it.fieldId === i.fieldId) {\n                  it.available = false;\n                  it.type = \"text\";\n                  it.value = i.fieldValue;\n                }\n              });\n            });\n          }\n        });\n      }\n\n      var detailPop = [/*#__PURE__*/React.createElement(Itempop, {\n        key: \"5\",\n        value: \"home\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 43\n          }\n        }, \" \\uE62F \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 6\n        }\n      }, \"\\u9996\\u9875\"), /*#__PURE__*/React.createElement(Itempop, {\n        key: \"1\",\n        value: \"user\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 43\n          }\n        }, \" \\uE74C \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 6\n        }\n      }, \"\\u7528\\u6237\"), /*#__PURE__*/React.createElement(Itempop, {\n        key: \"3\",\n        value: \"save\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 43\n          }\n        }, \" \\uE61A \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 6\n        }\n      }, \"\\u4FDD\\u5B58\"), /*#__PURE__*/React.createElement(Itempop, {\n        key: \"4\",\n        value: \"nav\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 42\n          }\n        }, \" \\uE611 \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 6\n        }\n      }, \"\\u5BFC\\u822A\"), /*#__PURE__*/React.createElement(Itempop, {\n        key: \"2\",\n        value: \"login\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 44\n          }\n        }, \" \\uE739 \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 6\n        }\n      }, \"\\u9000\\u51FA\")];\n      var drawerPop = [/*#__PURE__*/React.createElement(Itempop, {\n        key: \"3\",\n        value: \"save\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 43\n          }\n        }, \" \\uE61A \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 6\n        }\n      }, \"\\u4FDD\\u5B58\")];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"details\",\n        style: menuId === \"user\" ? {\n          paddingTop: 0\n        } : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }\n      }, menuId === \"user\" ? null : /*#__PURE__*/React.createElement(Nav, {\n        title: headerName,\n        data: data,\n        handleSelected: this.handlePop,\n        isDrawer: isDrawer,\n        shutRabcTem: this.props.match ? null : this.props.shutRabcTem,\n        pops: this.props.match ? detailPop : drawerPop,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 28\n        }\n      }), premises && premises.length > 0 ? /*#__PURE__*/React.createElement(_List, {\n        renderHeader: function renderHeader() {\n          return \"默认字段（不可修改）\";\n        },\n        id: \"\\u9ED8\\u8BA4\\u5B57\\u6BB5\\uFF08\\u4E0D\\u53EF\\u4FEE\\u6539\\uFF09\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixedDiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 8\n        }\n      }, \" \"), premises.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(FormCard, {\n          formList: item,\n          getFieldProps: getFieldProps,\n          key: \"默认字段（不可修改）\" + index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 9\n          }\n        });\n      })) : null, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 6\n        }\n      }, dtmplGroup && dtmplGroup.map(function (item, i) {\n        var selectionTemplateId = item.selectionTemplateId;\n        var dialogSelectType = item.dialogSelectType;\n        var rabcUncreatable = item.rabcUncreatable;\n        var rabcUnupdatable = item.rabcUnupdatable;\n        var rabcTemplateGroupId = item.rabcTemplateGroupId;\n        var rabcTemplatecreatable = false;\n        var rabcTemplateupdatable = false;\n\n        if (rabcTemplateGroupId && rabcUncreatable === null) {\n          rabcTemplatecreatable = true;\n        }\n\n        if (rabcTemplateGroupId && rabcUnupdatable === null) {\n          rabcTemplateupdatable = true;\n        }\n\n        return /*#__PURE__*/React.createElement(_List, {\n          id: item.title,\n          key: \"\".concat(item.id, \"[\").concat(i, \"]\"),\n          renderHeader: function renderHeader() {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"listHeader\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 12\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 13\n              }\n            }, \" \", item.title, item.composite && item.lists ? \"(\\u5171\".concat(item.lists.length, \"\\u6761)\") : null, \" \"), item.composite ? /*#__PURE__*/React.createElement(\"div\", {\n              className: \"detailButtons\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 14\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              className: \"iconfont\",\n              onClick: function onClick() {\n                return _this2.addList(item);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 15\n              }\n            }, \" \\uE63D\"), selectionTemplateId && dialogSelectType ? /*#__PURE__*/React.createElement(\"span\", {\n              className: \"iconfont\",\n              onClick: function onClick() {\n                return _this2.SelectTemplate.onOpenChange(item);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 15\n              }\n            }, \"\\uE6F4\") : null, rabcTemplatecreatable && !isDrawer ?\n            /*#__PURE__*/\n            // 判断是否是弹出的抽屉\n            React.createElement(\"span\", {\n              className: \"iconfont\",\n              onClick: function onClick() {\n                return _this2.editTemplate(true, null, item.id);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 15\n              }\n            }, \"\\uE61B\") : null) : null);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"fixedDiv\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 10\n          }\n        }, \" \"), item.composite && item.lists ? item.lists.map(function (it, index) {\n          if (index <= item.limitLen) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              key: it.code + index,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 20\n              }\n            }, /*#__PURE__*/React.createElement(EditList, {\n              formList: it,\n              getFieldProps: getFieldProps,\n              optionsMap: optionsMap,\n              isDrawer: isDrawer,\n              rabcTemplateupdatable: rabcTemplateupdatable,\n              deleteList: function deleteList(e) {\n                return _this2.showAlert(it.code, e);\n              },\n              editTemplate: function editTemplate() {\n                return _this2.editTemplate(true, it.code, item.id);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 16\n              }\n            }), index === item.limitLen && item.lists.length > item.limitLen + 1 ? /*#__PURE__*/React.createElement(\"span\", {\n              className: \"more iconfont\",\n              onClick: function onClick() {\n                return _this2.seeMore(item, 100);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 16\n              }\n            }, \"\\uE624\") : null, item.limitLen === 100 && index === item.lists.length - 1 ? /*#__PURE__*/React.createElement(\"span\", {\n              className: \"more iconfont trans\",\n              onClick: function onClick() {\n                return _this2.seeMore(item, 1);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 16\n              }\n            }, \"\\uE624\") : null);\n          } else {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              key: it.code + index,\n              style: {\n                display: \"none\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(EditList, {\n              formList: it,\n              getFieldProps: getFieldProps,\n              optionsMap: optionsMap,\n              isDrawer: isDrawer,\n              rabcTemplateupdatable: rabcTemplateupdatable,\n              deleteList: function deleteList(e) {\n                return _this2.showAlert(it.code, e);\n              },\n              editTemplate: function editTemplate() {\n                return _this2.editTemplate(true, it.code, item.id);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 16\n              }\n            }));\n          }\n        }) : item.fields.map(function (it, index) {\n          if (index <= item.limitLen) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              key: it.id + index,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 20\n              }\n            }, /*#__PURE__*/React.createElement(FormCard, {\n              formList: it,\n              getFieldProps: getFieldProps,\n              optionsMap: optionsMap,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 16\n              }\n            }), index === item.limitLen && item.fields.length > item.limitLen + 1 ? /*#__PURE__*/React.createElement(\"span\", {\n              className: \"more iconfont\",\n              onClick: function onClick() {\n                return _this2.seeMore(item, 100);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 16\n              }\n            }, \"\\uE624\") : null, item.limitLen === 100 && index === item.fields.length - 1 ? /*#__PURE__*/React.createElement(\"span\", {\n              className: \"more iconfont trans\",\n              onClick: function onClick() {\n                return _this2.seeMore(item, 4);\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 16\n              }\n            }, \"\\uE624\") : null);\n          } else {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              key: it.id + index,\n              style: {\n                display: \"none\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(FormCard, {\n              formList: it,\n              getFieldProps: getFieldProps,\n              optionsMap: optionsMap,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 16\n              }\n            }));\n          }\n        }));\n      })), /*#__PURE__*/React.createElement(TemplateDrawer // 选择实体模板\n      , {\n        onRef: this.onRef,\n        menuId: menuId,\n        loadTemplate: this.loadTemplate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(RabcTemplateDrawer, {\n        showRabcTempDrawer: showRabcTempDrawer,\n        menuId: menuId,\n        groupId: groupId,\n        dtmplGroup: dtmplGroup,\n        loadTemplate: this.loadTemplate,\n        tempCode: tempCode,\n        shutRabcTem: function shutRabcTem() {\n          return _this2.editTemplate(false, null, null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(_ActivityIndicator, {\n        toast: true,\n        text: \"\\u52A0\\u8F7D\\u4E2D...\",\n        animating: animating,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(_Modal, {\n        popup: true,\n        visible: visibleNav,\n        onClose: this.onClose,\n        animationType: \"slide-up\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(_List, {\n        renderHeader: function renderHeader() {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 34\n            }\n          }, \" \\u8BF7\\u9009\\u62E9 \");\n        },\n        className: \"popup-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 7\n        }\n      }, scrollIds.map(function (i, index) {\n        return /*#__PURE__*/React.createElement(_List.Item, {\n          key: index,\n          onClick: function onClick() {\n            return _this2.scrollToAnchor(i);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 9\n          }\n        }, \" \", i, \" \");\n      })), /*#__PURE__*/React.createElement(_List.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        onClick: this.onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 8\n        }\n      }, \"\\u53D6\\u6D88\")))));\n    }\n  }]);\n\n  return Details;\n}(Component);\n\nexport default createForm()(Details);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/hclient_mobile_react/src/pages/details/index.js"],"names":["React","Component","createForm","Nav","Super","FormCard","Units","TemplateDrawer","EditList","RabcTemplateDrawer","Storage","Itempop","Item","alert","Details","state","itemList","optionsMap","animating","headerName","visibleNav","scrollIds","premises","isDrawer","props","match","menuId","params","code","fieldGroupId","handleScroll","scrollY","window","mainTopArr","k","i","length","node","document","getElementById","top","Math","floor","offsetTop","push","sort","a","b","fixedDiv","getElementsByClassName","style","display","lis","position","zIndex","background","loadRequest","setState","url","super","method","then","res","config","menuTitle","menu","title","dtmplGroup","requestSelect","dtmpl","groups","loadData","data","resi","fieldMap","forPic","entity","arrayMap","dataTitle","forEach","item","loadDataToList","flag","relaOptions","composite","model","fields","totalname","cname","lists","limitLen","id","toString","addType","relationSubdomain","list","value","label","it","index","deletebtn","type","name","relation","relationLabel","fieldId","c_id","validators","lastname","split","record","fieldAvailable","selectId","fieldIds","join","addList","RndNum","len","li","re","unshift","splice","handleSubmit","form","validateFields","force","err","values","Date","dateToString","Array","isArray","totalName","e","indexOf","undefined","console","log","formData","FormData","append","showRabcTempDrawer","status","success","loadEntites","history","fail","onRef","ref","SelectTemplate","loadTemplate","entities","addModal","byDfieldIds","deleteList","filter","includes","showAlert","stopPropagation","alertInstance","text","onPress","setTimeout","close","handlePop","handleNavAt","bodyScroll","preventDefault","addEventListener","passive","scrollToAnchor","anchorName","anchorElement","scrollTo","removeEventListener","onClose","seeMore","Num","editTemplate","isShowModal","groupId","tempCode","menuList","getFieldProps","fieldValue","fieldName","fieldTitle","available","detailPop","drawerPop","paddingTop","shutRabcTem","map","selectionTemplateId","dialogSelectType","rabcUncreatable","rabcUnupdatable","rabcTemplateGroupId","rabcTemplatecreatable","rabcTemplateupdatable","onOpenChange"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport { List, Toast, Popover, ActivityIndicator, Modal, Button, } from 'antd-mobile';\r\nimport { createForm } from 'rc-form';\r\nimport Nav from './../../components/Nav'\r\nimport Super from './../../super'\r\nimport FormCard from './../../components/FormCard'\r\nimport Units from './../../units'\r\nimport TemplateDrawer from './../../components/TemplateDrawer'\r\nimport EditList from './../../components/FormCard/editList'\r\nimport RabcTemplateDrawer from './../../components/RabcTemplateDrawer'\r\nimport Storage from './../../units/storage'\r\nimport './index.less'\r\nconst Itempop = Popover.Item;\r\nconst alert = Modal.alert;\r\n\r\nclass Details extends Component {\r\n\r\n\tstate = {\r\n\t\titemList: [],\r\n\t\toptionsMap:{},\r\n\t\tanimating: false,\r\n\t\theaderName: \"\",\r\n\t\tvisibleNav: false,\r\n\t\tscrollIds: [],\r\n\t\tpremises:[],\r\n\t\tisDrawer:this.props.match?false:true,\r\n\t\tmenuId:this.props.match?this.props.match.params.menuId:this.props.menuId,\r\n\t\tcode:this.props.match?this.props.match.params.code:this.props.code,\r\n\t\tfieldGroupId:this.props.match?null:this.props.fieldGroupId\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.menuId===\"user\"){\r\n\t\t\tthis.props.onRef(this)\r\n\t\t}\r\n\t\twindow.addEventListener('scroll', this.handleScroll);\r\n\t\tthis.loadRequest()\r\n\t}\r\n\thandleScroll = () => {\r\n\t\tconst {scrollIds} = this.state\r\n\t\tconst scrollY = window.scrollY\r\n\t\tconst mainTopArr = [];\r\n\t\tlet k = 0;\r\n\t\tif(scrollIds) { // 滑动锁定导航\r\n\t\t\tfor(let i = 0; i < scrollIds.length; i++) {\r\n\t\t\t\tlet node = document.getElementById(scrollIds[i])\r\n\t\t\t\tif(node) {\r\n\t\t\t\t\tlet top = Math.floor(node.offsetTop)\r\n\t\t\t\t\tmainTopArr.push(top);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmainTopArr.sort((a, b) => a - b) // 排序\r\n\t\t\tconst fixedDiv = document.getElementsByClassName(\"fixedDiv\")\r\n\t\t\tfor(let i = 0; i < mainTopArr.length; i++) {\r\n\t\t\t\tif((scrollY + 45) > mainTopArr[i]) {\r\n\t\t\t\t\tk = i\r\n\t\t\t\t\tfor(let i = 0; i < fixedDiv.length; i++) {\r\n\t\t\t\t\t\tfixedDiv[i].style.display = \"none\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfixedDiv[k].style.display = \"block\"\r\n\t\t\t\t}\r\n\t\t\t\tif(scrollY <= 5) {\r\n\t\t\t\t\tk = -1\r\n\t\t\t\t\tfor(let i = 0; i < fixedDiv.length; i++) {\r\n\t\t\t\t\t\tfixedDiv[i].style.display = \"none\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst lis = document.getElementsByClassName(\"am-list-header\")\r\n\t\tif(lis && mainTopArr.length > 0) {\r\n\t\t\tfor(let i = 0; i < lis.length; i++) {\r\n\t\t\t\tlis[i].style.position = \"static\"\r\n\t\t\t}\r\n\t\t\tif(k >= 0) {\r\n\t\t\t\tlis[k].style.position = \"fixed\"\r\n\t\t\t\tlis[k].style.top = \"45px\"\r\n\t\t\t\tlis[k].style.zIndex = \"78\"\r\n\t\t\t\tlis[k].style.background = \"#F5F5F9\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tloadRequest = () => {\r\n\t\tconst {menuId,fieldGroupId} = this.state\r\n\t\tthis.setState({\r\n\t\t\tanimating: true\r\n\t\t});\r\n\t\tlet url\r\n\t\tif(fieldGroupId){\r\n\t\t\turl =`api2/meta/tmpl/${menuId}/dtmpl/rabc/${fieldGroupId}`\r\n\t\t}else{\r\n\t\t\turl =`api2/meta/tmpl/${menuId}/dtmpl/normal/`\r\n\t\t}\r\n\t\tSuper.super({url,method:\"GET\",}).then((res) => {\r\n\t\t\tconst premises=res.config.premises\r\n\t\t\tconst menuTitle=res.menu?res.menu.title:null\r\n\t\t\tconst {scrollIds}=this.state\r\n\t\t\tif(premises && premises.length>0){\r\n\t\t\t\tscrollIds.push(\"默认字段（不可修改）\")\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpremises,\r\n\t\t\t\t\tscrollIds,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tlet dtmplGroup=this.requestSelect(res.config.dtmpl.groups)\t\t\t\r\n\t\t\tthis.loadData(dtmplGroup,menuTitle)\t\t\t\t\r\n\t\t})\r\n\t}\t\r\n\tloadData=(dtmplGroup,menuTitle)=>{\r\n\t\tconst {menuId,code,fieldGroupId}=this.state\r\n\t\tif(code){\r\n\t\t\tSuper.super({\r\n\t\t\t\turl:`api2/entity/${menuId}/detail/${code}`,\r\n\t\t\t\tmethod:'GET',\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tfieldGroupId\r\n\t\t\t\t}       \r\n\t\t\t}).then((resi)=>{\r\n\t\t\t\tconst fieldMap=Units.forPic(resi.entity.fieldMap)  \r\n\t\t\t\tconst arrayMap=resi.entity.arrayMap\r\n\t\t\t\tconst dataTitle=resi.entity.title\r\n\t\t\t\tfor(let i in arrayMap){\r\n\t\t\t\t\tarrayMap[i].forEach((item)=>{\r\n\t\t\t\t\t\titem.fieldMap.code=item.code\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadDataToList(dtmplGroup,fieldMap,arrayMap)\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\theaderName: `${menuTitle}-${dataTitle}-详情`,\r\n\t\t\t\t})\t\r\n\t\t\t})\t\r\n\t\t}else{\r\n\t\t\tthis.loadDataToList(dtmplGroup) // 没有code，就是创建，没有值\r\n\t\t\tthis.setState({\r\n\t\t\t\theaderName:menuId===\"user\"?\"用户\":`${menuTitle}-创建`,\r\n\t\t\t})\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\tloadDataToList=(dtmplGroup,fieldMap,arrayMap)=>{\r\n\t\tdtmplGroup.forEach((item)=>{\r\n\t\t\tlet flag=false // 是否添加关系\r\n\t\t\tconst relaOptions = []\r\n\t\t\tif(item.composite){\r\n\t\t\t\tconst model=item.fields\r\n\t\t\t\tconst totalname=item.composite.cname\r\n\t\t\t\titem.lists=[]\r\n\t\t\t\titem.limitLen=1\r\n\t\t\t\tfor(let k in arrayMap){\r\n\t\t\t\t\tif(k===item.id.toString()){\r\n\t\t\t\t\t\titem.lists.push(...arrayMap[k])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(item.composite.addType===5){\r\n\t\t\t\t\tflag=true\r\n\t\t\t\t\titem.composite.relationSubdomain.forEach((item) => {\r\n\t\t\t\t\t\tconst list = {\r\n\t\t\t\t\t\t\ttitle:item,\r\n\t\t\t\t\t\t\tvalue:item,\r\n\t\t\t\t\t\t\tlabel:item,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trelaOptions.push(list)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\titem.lists.forEach((it,index)=>{\r\n\t\t\t\t\tit.list=[]\r\n\t\t\t\t\tconst deletebtn = {\r\n\t\t\t\t\t\ttype:\"deletebtn\",\r\n\t\t\t\t\t\tcode:it.code,\r\n\t\t\t\t\t\tname:`deletebtn[${index}]`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tit.list.push(deletebtn)\r\n\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\tconst relation = {\r\n\t\t\t\t\t\t\ttype:\"relation\",\r\n\t\t\t\t\t\t\tvalue:it.relationLabel,\r\n\t\t\t\t\t\t\ttitle:\"关系\",\r\n\t\t\t\t\t\t\tfieldId:item.composite.c_id,\r\n\t\t\t\t\t\t\tvalidators:\"required\",\r\n\t\t\t\t\t\t\tname:`${totalname}[${index}].关系`,\r\n\t\t\t\t\t\t\trelationSubdomain:relaOptions,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tit.list.push(relation)\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tfor(let k in it.fieldMap){\r\n\t\t\t\t\t\tmodel.forEach((i)=>{\r\n\t\t\t\t\t\t\tif(k===i.id.toString()){\r\n\t\t\t\t\t\t\t\tconst lastname=i.name.split(\".\")[1]\r\n\t\t\t\t\t\t\t\tconst record={\r\n\t\t\t\t\t\t\t\t\tname:`${totalname}[${index}].${lastname}`,\r\n\t\t\t\t\t\t\t\t\ttitle:i.title,\r\n\t\t\t\t\t\t\t\t\ttype:i.type,\r\n\t\t\t\t\t\t\t\t\tvalidators:i.validators,\r\n\t\t\t\t\t\t\t\t\tfieldId:i.fieldId,\r\n\t\t\t\t\t\t\t\t\tvalue:it.fieldMap[k],\r\n\t\t\t\t\t\t\t\t\tcode:it.fieldMap.code,\r\n\t\t\t\t\t\t\t\t\tfieldAvailable:it.fieldAvailable,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tit.list.push(Units.forPic(record))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\t\t\t\t\r\n\t\t\t\titem.limitLen=4\r\n\t\t\t\titem.fields.forEach((it)=>{\r\n\t\t\t\t\tfor(let k in fieldMap){\r\n\t\t\t\t\t\tif(it.id.toString()===k){\r\n\t\t\t\t\t\t\tit.value=fieldMap[k]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\trequestSelect = (dtmplGroup) => {\r\n\t\tconst {scrollIds}=this.state\r\n\t\tconst selectId = []\r\n\t\tdtmplGroup.forEach((item) => {\r\n\t\t\titem.fields.forEach((it) => { \r\n\t\t\t\tif(it.type === \"select\" || it.type === \"label\") {\r\n\t\t\t\t\tselectId.push(it.fieldId)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tdtmplGroup.forEach((item) => {\r\n\t\t\tscrollIds.push(item.title)\r\n\t\t})\r\n\t\tif(selectId.length>0){\r\n\t\t\tSuper.super({\r\n\t\t\t\turl:`api2/meta/dict/field_options`,       \r\n\t\t\t\tdata:{\r\n\t\t\t\t\tfieldIds:selectId.join(',')\r\n\t\t\t\t},\r\n\t\t\t}).then((res)=>{\r\n\t\t\t\tconst optionsMap=res.optionsMap\r\n\t\t\t\tfor(let k in optionsMap){\r\n\r\n\t\t\t\t\tif(optionsMap[k]!=null){\r\n\t\t\t\t\t\toptionsMap[k].forEach((item)=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\titem.label=item.title\r\n\r\n\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toptionsMap,\r\n\t\t\t\t\tscrollIds,\r\n\t\t\t\t\tdtmplGroup,\r\n\t\t\t\t\tanimating: false,\r\n\t\t\t\t})\r\n\t\t\t})\t\r\n\t\t}else{\r\n\t\t\tthis.setState({\r\n\t\t\t\tscrollIds,\r\n\t\t\t\tdtmplGroup,\r\n\t\t\t\tanimating: false,\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn dtmplGroup\r\n\t}\r\n\taddList = (list) => {\r\n\t\tconst {dtmplGroup}=this.state\r\n\t\tconst record=[]\r\n\t\tconst relaOptions = []\r\n\t\tlet flag=false // 是否添加关系\r\n\t\tconst totalname=list.composite.cname\r\n\t\tconst code=Units.RndNum(9)\r\n\t\tconst len=list.lists.length\r\n\t\tif(list.composite){\r\n\t\t\tconst deletebtn = {\r\n\t\t\t\ttype:\"deletebtn\",\r\n\t\t\t\tcode,\r\n\t\t\t\tname:`deletebtn[${len}]`\r\n\t\t\t}\r\n\t\t\trecord.push(deletebtn)\r\n\t\t\tif(list.composite.addType===5){\t\t\t\t\r\n\t\t\t\tflag=true\r\n\t\t\t\tlist.composite.relationSubdomain.forEach((item) => {\r\n\t\t\t\t\tconst li = {\r\n\t\t\t\t\t\ttitle:item,\r\n\t\t\t\t\t\tlabel:item,\r\n\t\t\t\t\t\tvalue:item\r\n\t\t\t\t\t}\r\n\t\t\t\t\trelaOptions.push(li)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(flag){\r\n\t\t\t\tconst len=list.lists.length\r\n\t\t\t\tconst relation = {\r\n\t\t\t\t\ttype:\"relation\",\r\n\t\t\t\t\tvalue:relaOptions.length===1?relaOptions[0].value:\"\",\r\n\t\t\t\t\ttitle:\"关系\",\r\n\t\t\t\t\tfieldId:list.composite.c_id,\r\n\t\t\t\t\tvalidators:\"required\",\r\n\t\t\t\t\tname:`${totalname}[${len}].关系`,\r\n\t\t\t\t\trelationSubdomain:relaOptions,\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\trecord.push(relation)\r\n\t\t\t}\t\r\n\t\t}\r\n\t\tlist.fields.forEach((item)=>{\r\n\t\t\tconst lastname=item.name.split(\".\")[1]\r\n\t\t\tconst re={\r\n\t\t\t\tcode,\r\n\t\t\t\tfieldAvailable:item.fieldAvailable,\r\n\t\t\t\tfieldId:item.fieldId,\r\n\t\t\t\tname:`${totalname}[${len}].${lastname}`,\r\n\t\t\t\ttitle:item.title,\r\n\t\t\t\ttype:item.type,\r\n\t\t\t\tvalidators:item.validators,\r\n\t\t\t\tvalue:item.value\r\n\t\t\t}\r\n\t\t\trecord.push(re)\r\n\t\t})\r\n\t\t\r\n\t\tconst res={\r\n\t\t\tlist:record,\r\n\t\t\tcode\r\n\t\t}\r\n\t\tlist.lists.unshift(res)\r\n\t\tdtmplGroup.forEach((item,index)=>{\r\n\t\t\tif(item.id===list.id){\r\n\t\t\t\tdtmplGroup.splice(index,list)\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.setState({\r\n\t\t\tdtmplGroup\r\n\t\t})\r\n\t}\r\n\thandleSubmit = () => {\r\n\t\tconst {code,menuId,dtmplGroup,fieldGroupId}=this.state\r\n\t\tthis.setState({animating: true});\r\n\t\tthis.props.form.validateFields({force: true}, (err, values) => { // 提交再次验证\r\n\t\t\tif(!err){\r\n\t\t\t\tdtmplGroup.forEach((item)=>{\r\n\t\t\t\t\tif(item.composite){\r\n\t\t\t\t\t\tvalues[`${item.composite.cname}.$$flag$$`] = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tfor(let k in values){\r\n\t\t\t\t\tif(values[k] && values[k] instanceof Date){ // 判断时间格式\r\n\t\t\t\t\t\tvalues[k]=Units.dateToString(values[k])\r\n\t\t\t\t\t}else if(values[k] && typeof values[k] === \"object\" && Array.isArray(values[k])){\r\n\t\t\t\t\t\tconst totalName = k\r\n\t\t\t\t\t\tvalues[k].forEach((item, index) => {\r\n\t\t\t\t\t\t\tfor(let e in item) {\r\n\t\t\t\t\t\t\t\tif(e === \"关系\") {\r\n\t\t\t\t\t\t\t\t\te = \"$$label$$\"\r\n\t\t\t\t\t\t\t\t\tvalues[`${totalName}[${index}].${e}`] = item[\"关系\"]\r\n\t\t\t\t\t\t\t\t} else if(e.indexOf(\"code\") > -1) {\r\n\t\t\t\t\t\t\t\t\tif(item[e]) {\r\n\t\t\t\t\t\t\t\t\t\tvalues[`${totalName}[${index}].唯一编码`] = item[e]\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tdelete item[e]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if(item[e] === undefined) {\r\n\t\t\t\t\t\t\t\t\tdelete item[e] // 删除未更改的图片数据\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalues[`${totalName}[${index}].${e}`] = item[e]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tdelete values[k] // 删除原始的对象数据\r\n\t\t\t\t\t}else if(!values[k]){\r\n\t\t\t\t\t\tdelete values[k]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(values)\r\n\t\t\t\tconst formData = new FormData(); \r\n\t\t\t\tformData.append('唯一编码', code?code:\"\");\r\n\t\t\t\tfor(let k in values) {\r\n\t\t\t\t\tformData.append(k, values[k]);\r\n\t\t\t\t}\r\n\t\t\t\tlet url\r\n\t\t\t\tif(fieldGroupId){\r\n\t\t\t\t\turl=`api2/entity/${menuId}/detail/rabc/${fieldGroupId}`\r\n\t\t\t\t}else{\r\n\t\t\t\t\turl=`api2/entity/${menuId}/detail/normal`\r\n\t\t\t\t}\r\n\t\t\t\tSuper.super({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:formData\r\n\t\t\t\t},'formdata').then((res)=>{\r\n\t\t\t\t\tthis.setState({animating: false,showRabcTempDrawer:false});\r\n\t\t\t\t\tif(res && res.status===\"suc\"){\r\n\t\t\t\t\t\tToast.success(\"保存成功！\")\r\n\t\t\t\t\t\tif(menuId!==\"user\"){\r\n\t\t\t\t\t\t\tif(!this.props.match){\r\n\t\t\t\t\t\t\t\tthis.props.loadEntites(res.code,fieldGroupId)\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.props.history.push(`/${menuId}`)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tToast.fail(\"保存失败!\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tToast.fail(\"必填选项未填！！\")\r\n\t\t\t\tthis.setState({animating: false});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tonRef = (ref) => {\r\n\t\tthis.SelectTemplate = ref\r\n\t}\r\n\tloadTemplate = (entities,addModal) => {\r\n\t\tentities.forEach((item)=>{\r\n\t\t\tfor(let k in item.byDfieldIds){\r\n\t\t\t\taddModal.fields.forEach((it)=>{\r\n\t\t\t\t\tif(k===it.id.toString()){\r\n\t\t\t\t\t\tit.value=item.byDfieldIds[k]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.addList(addModal)\r\n\t\t})\t\r\n\t}\r\n\tdeleteList = (code) => {\r\n\t\tlet {dtmplGroup} = this.state\r\n\t\tdtmplGroup.forEach((item) => {\r\n\t\t\tif(item.composite) {\r\n\t\t\t\titem.lists = item.lists.filter((it) => it.code.includes(code)===false)\r\n\t\t\t}\r\n\t\t})\r\n\t\tToast.success(\"删除成功！\")\r\n\t\tthis.setState({\r\n\t\t\tdtmplGroup\r\n\t\t})\r\n\t}\r\n\tshowAlert = (code, e) => {\r\n\t\te.stopPropagation()\r\n\t\tconst alertInstance = alert('删除操作', '确认删除这条记录吗？', [\r\n\t\t\t{text: '取消'},\r\n\t\t\t{text: '确认',onPress: () => this.deleteList(code)},\r\n\t\t]);\r\n\t\tsetTimeout(() => {\r\n\t\t\talertInstance.close();\r\n\t\t}, 10000);\r\n\t};\r\n\thandlePop = (value) => {\r\n\t\tif(value === \"save\") {\r\n\t\t\tthis.handleSubmit()\r\n\t\t} else if(value === \"nav\") {\r\n\t\t\tthis.handleNavAt()\r\n\t\t}else{\r\n\t\t\tthis.props.history.push(`/${value}`)\r\n\t\t}\r\n\t}\r\n\tbodyScroll = (e) => {\r\n\t\te.preventDefault();\r\n\t}\r\n\thandleNavAt = () => {\r\n\t\tdocument.addEventListener('touchmove', this.bodyScroll, {passive: false})\r\n\t\tthis.setState({\r\n\t\t\tvisibleNav: true\r\n\t\t})\r\n\t}\r\n\tscrollToAnchor = (anchorName) => { // 导航\r\n\t\tif(anchorName) {\r\n\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\tif(anchorElement) {\r\n\t\t\t\twindow.scrollTo(0, anchorElement.offsetTop - 43);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tvisibleNav: false\r\n\t\t})\r\n\t\tdocument.removeEventListener('touchmove', this.bodyScroll, {passive: false})\r\n\t}\r\n\tonClose = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisibleNav: false\r\n\t\t})\r\n\t\tdocument.removeEventListener('touchmove', this.bodyScroll, {passive: false})\r\n\t}\r\n\tseeMore=(record,Num)=>{ // 折叠面板\r\n\t\tconst {dtmplGroup}=this.state\r\n\t\tdtmplGroup.forEach((item)=>{\r\n\t\t\tif(item.id===record.id){\r\n\t\t\t\titem.limitLen=Num\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.setState({\r\n\t\t\tdtmplGroup\r\n\t\t})\r\n\t}\t\r\n\teditTemplate=(isShowModal,code,groupId)=>{\r\n\t\tthis.setState({\r\n\t\t\tshowRabcTempDrawer:isShowModal,\r\n\t\t\tgroupId,\r\n\t\t\ttempCode:code\r\n\t\t})\r\n\t}\r\n\trender() { \r\n\t\tconst data = Storage.menuList\r\n\t\tconst {getFieldProps} = this.props.form;\r\n\t\tconst {dtmplGroup,optionsMap,animating,headerName,menuId,visibleNav,scrollIds,tempCode,premises,\r\n\t\t\tshowRabcTempDrawer,groupId,isDrawer} = this.state\r\n\t\tif(premises && premises.length>0 && dtmplGroup){\r\n\t\t\tdtmplGroup.forEach((item)=>{\r\n\t\t\t\tif(!item.composite){\r\n\t\t\t\t\titem.fields.forEach((it)=>{\r\n\t\t\t\t\t\tpremises.forEach((i)=>{\r\n\t\t\t\t\t\t\ti.type=\"text\"\r\n\t\t\t\t\t\t\ti.value=i.fieldValue\r\n\t\t\t\t\t\t\ti.name=i.fieldName\r\n\t\t\t\t\t\t\ti.title=i.fieldTitle\r\n\t\t\t\t\t\t\ti.available=false\r\n\t\t\t\t\t\t\tif(it.fieldId===i.fieldId){\r\n\t\t\t\t\t\t\t\tit.available=false\r\n\t\t\t\t\t\t\t\tit.type=\"text\"\r\n\t\t\t\t\t\t\t\tit.value=i.fieldValue\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst detailPop = [\r\n\t\t\t( <Itempop key=\"5\" value=\"home\" icon={ <span className=\"iconfont\" > &#xe62f; </span>}>首页</Itempop> ),\r\n\t\t\t( <Itempop key=\"1\" value=\"user\" icon={ <span className=\"iconfont\" > &#xe74c; </span>}>用户</Itempop> ),\r\n\t\t\t( <Itempop key=\"3\" value=\"save\" icon={ <span className=\"iconfont\" > &#xe61a; </span>}>保存</Itempop> ),\r\n\t\t\t( <Itempop key=\"4\" value=\"nav\" icon={ <span className=\"iconfont\" > &#xe611; </span>}>导航</Itempop> ),\r\n\t\t\t( <Itempop key=\"2\" value=\"login\" icon={ <span className=\"iconfont\" > &#xe739; </span>}>退出</Itempop> ),\r\n\t\t]\r\n\t\tconst drawerPop=[\r\n\t\t\t( <Itempop key=\"3\" value=\"save\" icon={ <span className=\"iconfont\" > &#xe61a; </span>}>保存</Itempop> ),\r\n\t\t]\r\n\t\treturn( <div className=\"details\" style={menuId===\"user\"?{paddingTop:0}:null}>\r\n\t\t\t\t\t{menuId===\"user\"?null:<Nav title = {headerName}\r\n\t\t\t\t\t\tdata = {data}\r\n\t\t\t\t\t\thandleSelected = {this.handlePop}\r\n\t\t\t\t\t\tisDrawer={isDrawer}\r\n\t\t\t\t\t\tshutRabcTem={this.props.match?null:this.props.shutRabcTem}\r\n\t\t\t\t\t\tpops = {this.props.match?detailPop:drawerPop}/>}\r\n\t\t\t\t\t{premises && premises.length>0?\r\n\t\t\t\t\t\t<List \r\n\t\t\t\t\t\t\trenderHeader = {() =>\"默认字段（不可修改）\"}\r\n\t\t\t\t\t\t\tid=\"默认字段（不可修改）\">\r\n\t\t\t\t\t\t\t<div className = \"fixedDiv\" > </div>\t\r\n\t\t\t\t\t\t\t{premises.map((item,index)=>\r\n\t\t\t\t\t\t\t\t<FormCard\r\n\t\t\t\t\t\t\t\t\tformList = {item}\r\n\t\t\t\t\t\t\t\t\tgetFieldProps = {getFieldProps}\r\n\t\t\t\t\t\t\t\t\tkey={\"默认字段（不可修改）\"+index}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t:null}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{dtmplGroup && dtmplGroup.map((item, i) => {\r\n\t\t\t\t\t\t\tconst selectionTemplateId=item.selectionTemplateId\r\n\t\t\t\t\t\t\tconst dialogSelectType=item.dialogSelectType\r\n\t\t\t\t\t\t\tconst rabcUncreatable=item.rabcUncreatable\r\n\t\t\t\t\t\t\tconst rabcUnupdatable=item.rabcUnupdatable\r\n\t\t\t\t\t\t\tconst rabcTemplateGroupId=item.rabcTemplateGroupId\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet rabcTemplatecreatable=false\r\n\t\t\t\t\t\t\tlet rabcTemplateupdatable=false\r\n\t\t\t\t\t\t\tif(rabcTemplateGroupId && rabcUncreatable===null){\r\n\t\t\t\t\t\t\t\trabcTemplatecreatable=true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(rabcTemplateGroupId && rabcUnupdatable===null){\r\n\t\t\t\t\t\t\t\trabcTemplateupdatable=true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn <List\r\n\t\t\t\t\t\t\t\t\t\tid = {item.title}\t\r\n\t\t\t\t\t\t\t\t\t\tkey = {`${item.id}[${i}]`}\r\n\t\t\t\t\t\t\t\t\t\trenderHeader = {() =>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className = \"listHeader\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span> {item.title}{item.composite && item.lists?`(共${item.lists.length}条)`:null} </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.composite ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className = \"detailButtons\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className = \"iconfont\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick = {() => this.addList(item)} > &#xe63d;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span> \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectionTemplateId && dialogSelectType? \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className = \"iconfont\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick = {() => this.SelectTemplate.onOpenChange(item)} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe6f4; \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>:null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{rabcTemplatecreatable && !isDrawer? // 判断是否是弹出的抽屉\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className = \"iconfont\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick = {() =>this.editTemplate(true,null,item.id)} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe61b;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>:null}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>:null\r\n\t\t\t\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t\t\t> \r\n\t\t\t\t\t\t\t\t\t{ /* 为了弥补fixed之后的空白区域 */ }\r\n\t\t\t\t\t\t\t\t\t<div className = \"fixedDiv\" > </div>\t\r\n\t\t\t\t\t\t\t\t\t{item.composite && item.lists?\r\n\t\t\t\t\t\t\t\t\t\titem.lists.map((it,index)=>{\r\n\t\t\t\t\t\t\t\t\t\t\tif(index<=item.limitLen){\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn <div key={it.code+index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditList\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformList = {it}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetFieldProps = {getFieldProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptionsMap = {optionsMap}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDrawer={isDrawer}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trabcTemplateupdatable={rabcTemplateupdatable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteList = {(e) => this.showAlert(it.code, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditTemplate={()=>this.editTemplate(true,it.code,item.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index===item.limitLen && item.lists.length>item.limitLen+1?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"more iconfont\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.seeMore(item,100)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe624;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.limitLen===100 && index===item.lists.length-1?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"more iconfont trans\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.seeMore(item,1)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe624;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \t<div key={it.code+index} style={{display:\"none\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditList\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformList = {it}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetFieldProps = {getFieldProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptionsMap = {optionsMap}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDrawer={isDrawer}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trabcTemplateupdatable={rabcTemplateupdatable}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteList = {(e) => this.showAlert(it.code, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditTemplate={()=>this.editTemplate(true,it.code,item.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}):\r\n\t\t\t\t\t\t\t\t\t\titem.fields.map((it, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif(index<=item.limitLen){\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn <div key = {it.id+index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormCard\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformList = {it}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetFieldProps = {getFieldProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptionsMap = {optionsMap}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index===item.limitLen && item.fields.length>item.limitLen+1?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"more iconfont\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.seeMore(item,100)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe624;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.limitLen===100 && index===item.fields.length-1?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"more iconfont trans\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.seeMore(item,4)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#xe624;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \t<div key = {it.id+index} style={{display:\"none\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormCard\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformList = {it}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetFieldProps = {getFieldProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptionsMap = {optionsMap}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t})} \r\n\t\t\t\t\t</div> \r\n\t\t\t\t<TemplateDrawer  // 选择实体模板\r\n\t\t\t\t\tonRef = {this.onRef}\r\n\t\t\t\t\tmenuId = {menuId}\r\n\t\t\t\t\tloadTemplate = {this.loadTemplate}\r\n\t\t\t\t/>\r\n\t\t\t\t<RabcTemplateDrawer \r\n\t\t\t\t\tshowRabcTempDrawer={showRabcTempDrawer}\r\n\t\t\t\t\tmenuId = {menuId}\r\n\t\t\t\t\tgroupId={groupId}\r\n\t\t\t\t\tdtmplGroup={dtmplGroup}\r\n\t\t\t\t\tloadTemplate={this.loadTemplate}\r\n\t\t\t\t\ttempCode={tempCode}\r\n\t\t\t\t\tshutRabcTem={()=>this.editTemplate(false,null,null)}\r\n\t\t\t\t/>\r\n\t\t\t\t<ActivityIndicator\r\n\t\t\t\t\ttoast\r\n\t\t\t\t\ttext = \"加载中...\"\r\n\t\t\t\t\tanimating = {animating}\r\n\t\t\t\t/>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\tvisible = {visibleNav}\r\n\t\t\t\t\tonClose = {this.onClose}\r\n\t\t\t\t\tanimationType = \"slide-up\" >\r\n\t\t\t\t\t<List renderHeader = {() => <div > 请选择 </div>} className=\"popup-list\"> \r\n\t\t\t\t\t\t<div className = \"navbox\" > \r\n\t\t\t\t\t\t\t{scrollIds.map((i, index) => \r\n\t\t\t\t\t\t\t\t<List.Item key = {index} onClick = {() => this.scrollToAnchor(i)} > {i} </List.Item>)\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t</div> \r\n\t\t\t\t\t\t<List.Item >\r\n\t\t\t\t\t\t\t<Button onClick = {this.onClose}>取消</Button> \r\n\t\t\t\t\t\t</List.Item> \r\n\t\t\t\t\t</List> \r\n\t\t\t\t</Modal> \r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default createForm()(Details);"]},"metadata":{},"sourceType":"module"}