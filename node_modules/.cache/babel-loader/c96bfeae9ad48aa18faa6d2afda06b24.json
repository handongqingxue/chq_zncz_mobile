{"ast":null,"code":"import \"antd-mobile/es/button/style\";\nimport _Button from \"antd-mobile/es/button\";\nimport \"antd-mobile/es/list/style\";\nimport _List from \"antd-mobile/es/list\";\nimport \"antd-mobile/es/input-item/style\";\nimport _InputItem from \"antd-mobile/es/input-item\";\nimport \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\src\\\\pages\\\\login\\\\index.js\";\nimport React, { Component } from 'react';\nimport { createForm } from 'rc-form';\nimport Units from './../../units';\nimport Super from \"./../../super\";\nimport \"./index.less\";\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      password: \"\"\n    };\n\n    _this.handleKeyDown = function (event) {\n      //按下enter键，触发login事件\n      switch (event.keyCode) {\n        case 13:\n          _this.submit();\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.submit = function () {\n      _this.props.form.validateFields(function (error, value) {\n        if (!error) {\n          Super.super({\n            url: 'api2/auth/token',\n            method: 'GET',\n            query: value\n          }).then(function (res) {\n            if (res.status === \"504\") {\n              _Toast.info('服务器连接失败');\n            } else {\n              if (res.status === 'suc') {\n                window.location.href = \"/#/home\";\n                Units.setLocalStorge(\"tokenName\", res.token);\n              } else if (res.errorMsg) {\n                _Toast.info(res.errorMsg);\n              }\n            }\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //组件渲染完成之后触发此函数\n      window.addEventListener('keydown', this.handleKeyDown); //确认事件\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('keydown', this.handleKeyDown);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      var _this$props$form = this.props.form,\n          getFieldProps = _this$props$form.getFieldProps,\n          getFieldError = _this$props$form.getFieldError;\n      var uname = getFieldError('username');\n      var pword = getFieldError('password');\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }\n      }, \"\\u6B22\\u8FCE\\u767B\\u5F55\"), uname ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"err\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 26\n        }\n      }, uname) : null, /*#__PURE__*/React.createElement(_List, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({}, getFieldProps('username', {\n        initialValue: username,\n        rules: [{\n          required: true,\n          message: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n        }]\n      }), {\n        clear: true,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"iconfont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 30\n        }\n      }, \"\\uE74C\")))), pword ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"err\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 27\n        }\n      }, pword) : null, /*#__PURE__*/React.createElement(_List, {\n        style: {\n          marginBottom: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({}, getFieldProps('password', {\n        initialValue: password,\n        rules: [{\n          required: true,\n          message: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n        }]\n      }), {\n        clear: true,\n        type: \"password\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"iconfont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 30\n        }\n      }, \"\\uE736\")))), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }, \"\\u767B\\u5F55\"));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default createForm()(Login);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/hclient_mobile_react/src/pages/login/index.js"],"names":["React","Component","createForm","Units","Super","Login","state","username","password","handleKeyDown","event","keyCode","submit","props","form","validateFields","error","value","super","url","method","query","then","res","status","info","window","location","href","setLocalStorge","token","errorMsg","addEventListener","removeEventListener","getFieldProps","getFieldError","uname","pword","initialValue","rules","required","message","marginBottom"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport { List, InputItem, Button, Toast } from 'antd-mobile';\r\nimport { createForm } from 'rc-form';\r\nimport Units from './../../units'\r\nimport Super from \"./../../super\"\r\nimport \"./index.less\"\r\n\r\nclass Login extends Component {\r\n\r\n\tstate = {\r\n\t\tusername:\"\",\r\n        password:\"\",\r\n\t}\r\n\tcomponentDidMount() { //组件渲染完成之后触发此函数\r\n\t\twindow.addEventListener('keydown', this.handleKeyDown) //确认事件\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('keydown', this.handleKeyDown)\r\n\t}\r\n\thandleKeyDown = (event) => { //按下enter键，触发login事件\r\n\t\tswitch(event.keyCode) {\r\n\t\t\tcase 13:\r\n\t\t\t\tthis.submit();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tsubmit = () => {\r\n\t\tthis.props.form.validateFields((error, value) => {\r\n\t\t\tif(!error) {\r\n\t\t\t\tSuper.super({\r\n\t\t\t\t\turl: 'api2/auth/token',\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tquery: value\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif(res.status === \"504\") {\r\n\t\t\t\t\t\tToast.info('服务器连接失败');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(res.status === 'suc') {\r\n\t\t\t\t\t\t\twindow.location.href=\"/#/home\";\r\n\t\t\t\t\t\t\tUnits.setLocalStorge(\"tokenName\", res.token)\r\n\t\t\t\t\t\t} else if(res.errorMsg) {\r\n\t\t\t\t\t\t\tToast.info(res.errorMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst {username,password} = this.state\r\n\t\tconst {getFieldProps,getFieldError} = this.props.form;\r\n\t\tlet uname = getFieldError('username')\r\n\t\tlet pword = getFieldError('password')\r\n\t\treturn(\r\n\t\t\t<div className=\"login\">\r\n                <h1>欢迎登录</h1>\r\n                {(uname? <span className=\"err\">{uname}</span> : null)}\r\n                <List>\r\n                    <InputItem\r\n                        {...getFieldProps('username',{\r\n                            initialValue:username,\r\n                            rules:[{\r\n                                required: true, message: `请输入用户名`,\r\n                              }],\r\n                        })}\r\n                        clear\r\n                        placeholder=\"请输入用户名\">\r\n                        <div><span className=\"iconfont\">&#xe74c;</span></div>\r\n                    </InputItem>\r\n                </List>\r\n                {(pword ? <span className=\"err\">{pword}</span> : null)}\r\n                <List style={{marginBottom:40}}>\r\n                    <InputItem\r\n                        {...getFieldProps('password',{\r\n                            initialValue:password,\r\n                            rules:[{\r\n                                required: true, message: `请输入密码`,\r\n                              }],\r\n                        })}\r\n                        clear\r\n                        type=\"password\"\r\n                        placeholder=\"请输入密码\">\r\n                        <div><span className=\"iconfont\">&#xe736;</span></div>\r\n                    </InputItem>\r\n                </List>\r\n                <Button type=\"primary\" onClick={this.submit}>登录</Button>\r\n            </div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default createForm()(Login)"]},"metadata":{},"sourceType":"module"}