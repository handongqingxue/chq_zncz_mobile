{"ast":null,"code":"import _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\src\\\\pages\\\\testDataTj\\\\index.js\";\nimport { withRouter } from \"react-router-dom\";\nimport React, { Component } from 'react';\nimport \"./index.less\";\nimport $ from \"jquery\";\nimport ReactEcharts from \"echarts-for-react\";\nimport Super from \"../../super\";\n\nvar TestDataTj = /*#__PURE__*/function (_Component) {\n  _inherits(TestDataTj, _Component);\n\n  function TestDataTj() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TestDataTj);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TestDataTj)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      menuId: 17,\n      legendData: [],\n      series: [],\n      日期: 68,\n      年: 74,\n      月: 72,\n      月度周: 69,\n      日: 71\n    };\n\n    _this.request = function () {\n      _this.initListByMenuId(false);\n    };\n\n    _this.initListByMenuId = function (reload) {\n      Super.super({\n        url: \"api2/entity/\".concat(_this.state.menuId, \"/list/tmpl\"),\n        method: 'GET',\n        query: {\n          disabledColIds: \"\",\n          criteria_13: \"2020-05-20~2020-06-20\"\n        }\n      }).then(function (res) {\n        console.log(res);\n\n        if (!reload) {\n          res.ltmpl.criterias.map(function (item, index) {\n            if (item.id == 6) {\n              _this.initlegendData(item.fieldId);\n            }\n          });\n        }\n\n        _this.initListByQueryKey(res.queryKey);\n      });\n    };\n\n    _this.initListByQueryKey = function (queryKey) {\n      Super.super({\n        url: \"api2/entity/list/\".concat(queryKey, \"/data\"),\n        method: 'GET'\n      }).then(function (res) {\n        console.log(\"===\" + JSON.stringify(res));\n      });\n    };\n\n    _this.initlegendData = function (fieldId) {\n      Super.super({\n        url: \"api2/meta/dict/field_options\",\n        method: 'GET',\n        query: {\n          fieldIds: fieldId\n        }\n      }).then(function (res) {\n        console.log(res.optionsMap[fieldId]);\n        var ldMap = [];\n        var series = [];\n        res.optionsMap[fieldId].map(function (item, index) {\n          ldMap.push(item.title);\n          series.push({\n            name: item.title,\n            type: 'bar',\n            data: [1000, 2000, 1500, 3000, 2000, 1200, 800],\n            barGap: 0\n          });\n        });\n\n        _this.setState({\n          legendData: ldMap\n        });\n\n        _this.setState({\n          series: series\n        });\n      });\n    };\n\n    _this.getOption = function () {\n      var option = {\n        tooltip: {\n          //展示数据\n          trigger: 'axis',\n          axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n\n          }\n        },\n        legend: {\n          data: _this.state.legendData\n        },\n        xAxis: {\n          data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: _this.state.series\n        /*\r\n        [\r\n        {\r\n            name:'人员一键紧急报警',\r\n            type:'bar',\r\n            data:[1000,2000,1500,3000,2000,1200,800],\r\n            barGap:0\r\n        },\r\n        {\r\n            name:'车间缺员报警',\r\n            type:'bar',\r\n            data:[1000,2000,1500,3000,2000,1200,800],\r\n            barGap:0\r\n        }\r\n        ]\r\n         */\n\n      };\n      return option;\n    };\n\n    _this.goPage = function (value) {\n      _this.props.history.push(\"/\".concat(value));\n    };\n\n    return _this;\n  }\n\n  _createClass(TestDataTj, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $(\"html\").css(\"background-color\", \"#fff\");\n      this.request();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bjInfoPage_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"top_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, \"\\u62A5\\u8B66\\u7EDF\\u8BA1\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"back_but_div\",\n        onClick: this.goPage.bind(this, 'testHome'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }, \"<\\u8FD4\\u56DE\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }\n      }, \"\\u6708\"), /*#__PURE__*/React.createElement(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, \"\\u5468\"), /*#__PURE__*/React.createElement(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }, \"\\u661F\\u671F\")), /*#__PURE__*/React.createElement(ReactEcharts, {\n        option: this.getOption(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      }));\n    }\n  }]);\n\n  return TestDataTj;\n}(Component);\n\nexport default withRouter(TestDataTj);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/pages/testDataTj/index.js"],"names":["withRouter","React","Component","$","ReactEcharts","Super","TestDataTj","state","menuId","legendData","series","日期","年","月","月度周","日","request","initListByMenuId","reload","super","url","method","query","disabledColIds","criteria_13","then","res","console","log","ltmpl","criterias","map","item","index","id","initlegendData","fieldId","initListByQueryKey","queryKey","JSON","stringify","fieldIds","optionsMap","ldMap","push","title","name","type","data","barGap","setState","getOption","option","tooltip","trigger","axisPointer","legend","xAxis","yAxis","goPage","value","props","history","css","bind"],"mappings":"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","sourcesContent":["import {withRouter} from \"react-router-dom\";\r\nimport React, {Component} from 'react'\r\nimport \"./index.less\";\r\nimport $ from \"jquery\";\r\nimport ReactEcharts from \"echarts-for-react\";\r\nimport Super from \"../../super\";\r\n\r\nclass TestDataTj extends Component{\r\n    state={menuId:17,legendData:[],series:[],日期:68,年:74,月:72,月度周:69,日:71}\r\n\r\n    componentDidMount() {\r\n        $(\"html\").css(\"background-color\",\"#fff\");\r\n        this.request();\r\n    }\r\n    request=()=>{\r\n        this.initListByMenuId(false);\r\n    }\r\n    initListByMenuId=(reload)=>{\r\n        Super.super({\r\n            url:`api2/entity/${this.state.menuId}/list/tmpl`,\r\n            method:'GET',\r\n            query:{disabledColIds:\"\",criteria_13:\"2020-05-20~2020-06-20\"}\r\n        }).then((res) => {\r\n            console.log(res);\r\n            if(!reload){\r\n                res.ltmpl.criterias.map((item,index)=>{\r\n                    if(item.id==6){\r\n                        this.initlegendData(item.fieldId);\r\n                    }\r\n                });\r\n            }\r\n            this.initListByQueryKey(res.queryKey);\r\n        })\r\n    }\r\n    initListByQueryKey=(queryKey)=>{\r\n        Super.super({\r\n            url:`api2/entity/list/${queryKey}/data`,\r\n            method:'GET',\r\n        }).then((res) => {\r\n            console.log(\"===\"+JSON.stringify(res));\r\n        })\r\n    }\r\n    initlegendData=(fieldId)=>{\r\n        Super.super({\r\n            url:`api2/meta/dict/field_options`,\r\n            method:'GET',\r\n            query: {fieldIds:fieldId}\r\n        }).then((res) => {\r\n            console.log(res.optionsMap[fieldId]);\r\n            let ldMap=[];\r\n            let series=[];\r\n            res.optionsMap[fieldId].map((item,index)=>{\r\n                ldMap.push(item.title);\r\n                series.push({name:item.title,type:'bar',data:[1000,2000,1500,3000,2000,1200,800],barGap:0});\r\n            });\r\n            this.setState({legendData:ldMap});\r\n            this.setState({series:series});\r\n        })\r\n    }\r\n    getOption =()=> {\r\n        let option = {\r\n            tooltip:{   //展示数据\r\n                trigger:'axis',\r\n                axisPointer: {            // 坐标轴指示器，坐标轴触发有效\r\n                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\r\n                }\r\n            },\r\n            legend:{\r\n                data:this.state.legendData\r\n            },\r\n            xAxis:{\r\n                data:['周一','周二','周三','周四','周五','周六','周日']\r\n            },\r\n            yAxis:{\r\n                type:'value'\r\n            },\r\n            series:this.state.series\r\n                /*\r\n                [\r\n                {\r\n                    name:'人员一键紧急报警',\r\n                    type:'bar',\r\n                    data:[1000,2000,1500,3000,2000,1200,800],\r\n                    barGap:0\r\n                },\r\n                {\r\n                    name:'车间缺员报警',\r\n                    type:'bar',\r\n                    data:[1000,2000,1500,3000,2000,1200,800],\r\n                    barGap:0\r\n                }\r\n            ]\r\n                 */\r\n        }\r\n        return option;\r\n    }\r\n    goPage=(value)=>{\r\n        this.props.history.push(`/${value}`);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"bjInfoPage_div\">\r\n            <div className=\"top_div\">报警统计</div>\r\n            <div className=\"back_but_div\" onClick={this.goPage.bind(this,'testHome')}>&lt;返回</div>\r\n            <div>\r\n                <button>月</button>\r\n                <button>周</button>\r\n                <button>星期</button>\r\n            </div>\r\n            <ReactEcharts option={this.getOption()}/>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(TestDataTj)"]},"metadata":{},"sourceType":"module"}