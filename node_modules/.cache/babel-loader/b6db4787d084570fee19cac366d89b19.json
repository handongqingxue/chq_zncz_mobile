{"ast":null,"code":"import \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\src\\\\pages\\\\login\\\\index.js\";\nimport { createForm } from \"rc-form\";\nimport React, { Component } from 'react';\nimport Super from \"./../../super\";\nimport \"./index.less\";\nimport Button from \"antd-mobile/es/button\";\nimport Units from \"../../units\";\nimport $ from \"jquery\";\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      password: \"\"\n    };\n\n    _this.submit = function () {\n      if (_this.checkUsername()) {\n        if (_this.checkPassword()) {\n          var username = _this.refs.username_inp.value;\n          var password = _this.refs.password_inp.value;\n          Super.super({\n            url: \"api2/auth/token\",\n            method: \"get\",\n            query: {\n              username: username,\n              password: password\n            }\n          }).then(function (res) {\n            if (res.status == \"504\") {\n              _Toast.info('服务器连接失败');\n            } else {\n              if (res.status === 'suc') {\n                window.location.href = \"/#/home\";\n                Units.setLocalStorge(\"tokenName\", res.token);\n              } else if (res.status == \"error\") {\n                _Toast.info(res.errorMsg);\n              }\n            }\n          });\n        }\n      }\n    };\n\n    _this.checkUsername = function () {\n      var username = _this.refs.username_inp.value;\n\n      if (username == \"\" || username == null) {\n        _Toast.info(\"请输入用户名\");\n\n        return false;\n      } else return true;\n    };\n\n    _this.checkPassword = function () {\n      var password = _this.refs.password_inp.value;\n\n      if (password == \"\" || password == null) {\n        _Toast.info(\"请输入密码\");\n\n        return false;\n      } else return true;\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $(\"html\").css(\"background-color\", \"#fff\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginPage_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"main_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"title_h1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }\n      }, \"\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\u624B\\u673A\\u7248\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"username_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"iconfont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      }, \"\\uE74C\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"username_inp_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"username_inp\",\n        ref: \"username_inp\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"password_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"iconfont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, \"\\uE736\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"password_inp_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"password_inp\",\n        ref: \"password_inp\",\n        type: \"password\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginBut_div\",\n        onClick: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, \"\\u767B\\u5F55\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default createForm()(Login);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/pages/login/index.js"],"names":["createForm","React","Component","Super","Button","Units","$","Login","state","username","password","submit","checkUsername","checkPassword","refs","username_inp","value","password_inp","super","url","method","query","then","res","status","info","window","location","href","setLocalStorge","token","errorMsg","css"],"mappings":"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","sourcesContent":["import {createForm} from \"rc-form\";\r\nimport React, {Component} from 'react'\r\nimport {InputItem, Toast} from \"antd-mobile\";\r\nimport Super from \"./../../super\";\r\nimport \"./index.less\"\r\nimport Button from \"antd-mobile/es/button\";\r\nimport Units from \"../../units\";\r\nimport $ from \"jquery\";\r\n\r\nclass Login extends Component{\r\n    state = {\r\n        username:\"\",\r\n        password:\"\",\r\n    }\r\n    componentDidMount() {\r\n        $(\"html\").css(\"background-color\",\"#fff\");\r\n    }\r\n\r\n    submit=()=>{\r\n        if(this.checkUsername()){\r\n            if(this.checkPassword()){\r\n                let username=this.refs.username_inp.value;\r\n                let password=this.refs.password_inp.value;\r\n                Super.super({\r\n                    url:\"api2/auth/token\",\r\n                    method:\"get\",\r\n                    query:{username:username,password:password}\r\n                }).then((res)=>{\r\n                    if(res.status==\"504\"){\r\n                        Toast.info('服务器连接失败');\r\n                    }\r\n                    else{\r\n                        if(res.status === 'suc'){\r\n                            window.location.href=\"/#/home\";\r\n                            Units.setLocalStorge(\"tokenName\", res.token)\r\n                        }\r\n                        else if(res.status==\"error\"){\r\n                            Toast.info(res.errorMsg);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    checkUsername=()=>{\r\n        let username=this.refs.username_inp.value;\r\n        if(username==\"\"||username==null){\r\n            Toast.info(\"请输入用户名\");\r\n            return false;\r\n        }\r\n        else\r\n            return true;\r\n    }\r\n    checkPassword=()=>{\r\n        let password=this.refs.password_inp.value;\r\n        if(password==\"\"||password==null){\r\n            Toast.info(\"请输入密码\");\r\n            return false;\r\n        }\r\n        else\r\n            return true;\r\n    }\r\n\r\n    render(){\r\n        const {username,password}=this.state\r\n        return <div className=\"loginPage_div\">\r\n                <div className=\"main_div\">\r\n                <h1 className=\"title_h1\">人员定位系统手机版</h1>\r\n                <div className=\"username_div\">\r\n                    <span className=\"iconfont\">&#xe74c;</span>\r\n                    <div className=\"username_inp_div\">\r\n                        <input className=\"username_inp\" ref=\"username_inp\" placeholder=\"请输入用户名\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"password_div\">\r\n                    <span className=\"iconfont\">&#xe736;</span>\r\n                    <div className=\"password_inp_div\">\r\n                        <input className=\"password_inp\" ref=\"password_inp\" type=\"password\" placeholder=\"请输入密码\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"loginBut_div\" onClick={this.submit}>登录</div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nexport default createForm()(Login)"]},"metadata":{},"sourceType":"module"}