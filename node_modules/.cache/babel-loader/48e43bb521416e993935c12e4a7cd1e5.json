{"ast":null,"code":"import \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u667A\\u80FD\\u79F0\\u91CD\\u7CFB\\u7EDF\\\\\\u624B\\u673A\\u7AEF\\u9879\\u76EE\\\\chq_zncz_mobile\\\\src\\\\pages\\\\bjInfo\\\\index.js\";\nimport { withRouter } from \"react-router-dom\";\nimport React, { Component } from 'react';\nimport Super from \"../../super\";\nimport \"./index.less\";\nimport cjcyImg from \"../../image/011.png\";\nimport rycgImg from \"../../image/012.png\";\nimport ryyjjjImg from \"../../image/013.png\";\nimport rycsjjzImg from \"../../image/014.png\";\nimport $ from \"jquery\";\nimport alert from \"antd-mobile/lib/modal/alert\";\n\nvar BjInfo = /*#__PURE__*/function (_Component) {\n  _inherits(BjInfo, _Component);\n\n  function BjInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BjInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BjInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      menuId: 28,\n      selectIds: {\n        bjqyId: \"\",\n        bjlxId: \"\"\n      },\n      fieldIds: {\n        bjlxFieldId: \"\",\n        bjqyFieldId: \"\"\n      },\n      bjlxSelectList: [],\n      bjqySelectList: [],\n      bjList: [],\n      columnsId: {},\n      criteriasFieldKey: {},\n      实体名称字段: \"实体名称\",\n      处理状态字段: \"处理状态\",\n      围栏名称字段: \"围栏名称\",\n      报警类型字段: \"报警类型\",\n      报警时间字段: \"报警时间\",\n      // 实体名称:208,\n      // 处理状态:209,\n      // 围栏名称:204,\n      // 报警类型:210,\n      // 报警时间:206,\n      报警类型数据库里名称: {\n        紧急报警: \"人员一键紧急报警\",\n        缺员报警: \"车间缺员报警\",\n        超员报警: \"车间超员报警\",\n        串岗报警: \"人员串岗报警\",\n        滞留报警: \"人员滞留报警\",\n        静止报警: \"人员长时间静止报警\"\n      },\n      报警类型手机端显示名称: {\n        紧急报警: \"一键紧急报警\",\n        缺员超员报警: \"车间缺员、超员报警\",\n        串岗滞留报警: \"人员串岗、滞留报警\",\n        静止报警: \"静止报警\"\n      },\n      bjDetailTitle: \"\",\n      bjDetailContent: \"\",\n      bjDetailCode: \"\"\n    };\n\n    _this.request = function () {\n      _this.initListByMenuId(false);\n    };\n\n    _this.initColumnsId = function (resColumns) {\n      var columnsId = {};\n      resColumns.map(function (item, index) {\n        //console.log(item.title+\",\"+item.id)\n        columnsId[item.title] = item.id;\n      }); //console.log(columnsId)\n\n      _this.setState({\n        columnsId: columnsId\n      });\n    };\n\n    _this.initListByMenuId = function (reload) {\n      var quyu = $(\"#quyu_select\").val();\n      var bjlxs = $(\"#bjlx_select\").val(); //console.log(\"bjlxs===\"+bjlxs)\n\n      Super.super({\n        url: \"api2/entity/\".concat(_this.state.menuId, \"/list/tmpl\"),\n        method: 'GET',\n        query: {\n          criteria_32: bjlxs,\n          criteria_33: \"待处理\",\n          criteria_37: quyu\n        } //query:query\n\n      }).then(function (res) {\n        //console.log(res);\n        if (!reload) {\n          var criteriasFieldKey = {};\n          res.ltmpl.criterias.map(function (item, index) {\n            if (item.id == 32) {\n              _this.state.selectIds.bjlxId = item.id;\n              _this.state.fieldIds.bjlxFieldId = item.fieldId;\n            } else if (item.id == 37) {\n              _this.state.selectIds.bjqyId = item.id;\n              _this.state.fieldIds.bjqyFieldId = item.fieldId;\n            }\n\n            criteriasFieldKey[item.title] = item.fieldKey;\n          });\n\n          _this.setState({\n            criteriasFieldKey: criteriasFieldKey\n          });\n          /*\r\n          let bjqyId=this.state.selectIds.bjqyId;\r\n          let bjqyFieldId=this.state.fieldIds.bjqyFieldId;\r\n          this.initSelect(bjqyId,bjqyFieldId);\r\n           */\n\n\n          _this.initBJQYSelect();\n\n          var bjlxId = _this.state.selectIds.bjlxId;\n          var bjlxFieldId = _this.state.fieldIds.bjlxFieldId;\n\n          _this.initSelect(bjlxId, bjlxFieldId);\n\n          _this.initColumnsId(res.ltmpl.columns);\n        }\n\n        _this.initListByQueryKey(res.queryKey);\n      });\n    };\n\n    _this.initListByQueryKey = function (queryKey) {\n      Super.super({\n        url: \"api2/entity/list/\".concat(queryKey, \"/data\"),\n        method: 'GET',\n        query: {\n          pageSize: 100\n        }\n      }).then(function (res) {\n        //console.log(\"===\"+JSON.stringify(res));\n        _this.setState({\n          bjList: res.entities\n        });\n      });\n    };\n\n    _this.initSelect = function (selectId, fieldId) {\n      Super.super({\n        url: \"api2/meta/dict/field_options\",\n        method: 'GET',\n        query: {\n          fieldIds: fieldId\n        }\n      }).then(function (res) {\n        //console.log(\"fieldId===\"+JSON.stringify(res.optionsMap[fieldId]));\n        if (selectId == 32) {\n          var bjlxSelectList = [];\n          res.optionsMap[fieldId].map(function (item, index) {\n            var 数据库里报警类型 = _this.state.报警类型数据库里名称;\n            var 手机端报警类型 = _this.state.报警类型手机端显示名称;\n            var bjlxSelectItem;\n            var exist = false;\n\n            switch (item.title) {\n              case 数据库里报警类型.紧急报警:\n                bjlxSelectItem = {\n                  title: 手机端报警类型.紧急报警,\n                  value: 数据库里报警类型.紧急报警\n                };\n                break;\n\n              case 数据库里报警类型.缺员报警:\n              case 数据库里报警类型.超员报警:\n                exist = _this.checkBjlxExistInSelect(bjlxSelectList, 手机端报警类型.缺员超员报警);\n                bjlxSelectItem = {\n                  title: 手机端报警类型.缺员超员报警,\n                  value: 数据库里报警类型.缺员报警 + \",\" + 数据库里报警类型.超员报警\n                };\n                break;\n\n              case 数据库里报警类型.滞留报警:\n              case 数据库里报警类型.串岗报警:\n                exist = _this.checkBjlxExistInSelect(bjlxSelectList, 手机端报警类型.串岗滞留报警);\n                bjlxSelectItem = {\n                  title: 手机端报警类型.串岗滞留报警,\n                  value: 数据库里报警类型.滞留报警 + \",\" + 数据库里报警类型.串岗报警\n                };\n                break;\n\n              case 数据库里报警类型.静止报警:\n                bjlxSelectItem = {\n                  title: 手机端报警类型.静止报警,\n                  value: 数据库里报警类型.静止报警\n                };\n                break;\n            }\n\n            if (!exist) bjlxSelectList.push(bjlxSelectItem);\n          });\n\n          _this.setState({\n            bjlxSelectList: bjlxSelectList\n          });\n        } else if (selectId == 37) _this.setState({\n          bjqySelectList: res.optionsMap[fieldId]\n        });\n      });\n    };\n\n    _this.checkBjlxExistInSelect = function (bjlxList, title) {\n      var exist = false;\n      bjlxList.map(function (item, index) {\n        if (item.title == title) {\n          exist = true;\n          return exist;\n        }\n      });\n      return exist;\n    };\n\n    _this.initBJQYSelect = function () {\n      Super.super({\n        url: \"api2/ks/clist/elefence/list/data\",\n        method: 'GET',\n        query: {\n          pageSize: 100\n        }\n      }).then(function (res) {\n        //console.log(res);\n        _this.setState({\n          bjqySelectList: res.result.entities\n        });\n      });\n    };\n\n    _this.showDeleteAlert = function () {\n      //alert(this.bjDetailCode);\n      alert(\"处理操作\", \"确认处理这条记录吗???\", [{\n        text: \"取消\"\n      }, {\n        text: \"确认\",\n        onPress: function onPress() {\n          return _this.handelState(_this.state.bjDetailCode);\n        }\n      }]);\n    };\n\n    _this.handelState = function (code) {\n      console.log(\"code===\" + code);\n      var data = {};\n      data['唯一编码'] = code;\n      data[_this.state.criteriasFieldKey[_this.state.处理状态字段]] = \"已处理\";\n      Super.super({\n        url: \"api2/entity/\".concat(_this.state.menuId, \"/detail/normal/\"),\n        method: 'post',\n        data: data\n      }).then(function (res) {\n        //console.log(\"res===\"+JSON.stringify(res));\n        if (res.status === \"suc\") {\n          _Toast.success(\"处理成功！\"); //刷新列表\n\n\n          _this.showBjDetailDialogDiv(null, null, 0);\n\n          _this.initListByMenuId(true);\n        } else {\n          _Toast.info('处理失败！');\n        }\n      });\n    };\n\n    _this.confirmAll = function () {\n      var codes = \"\";\n\n      _this.state.bjList.map(function (item, index) {\n        codes += \",\" + item.code;\n      });\n\n      _this.state.bjDetailCode = codes.substring(1);\n      console.log(_this.state.bjDetailCode);\n\n      _this.showDeleteAlert();\n    };\n\n    _this.goPage = function (value) {\n      _this.props.history.push(\"/\".concat(value));\n    };\n\n    return _this;\n  }\n\n  _createClass(BjInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $(\"html\").css(\"background-color\", \"#fff\");\n      this.request();\n    }\n  }, {\n    key: \"substringItemName\",\n    value: function substringItemName(value) {\n      if (value) {\n        return value.split(\"@R@\")[1];\n      } else return \"\";\n    }\n  }, {\n    key: \"showBjDetailDialogDiv\",\n    value: function showBjDetailDialogDiv(cellMap, code, show) {\n      //console.log(cellMap);\n      if (show == 1) {\n        this.state.bjDetailCode = code;\n        this.setState({\n          bjDetailTitle: cellMap[this.state.columnsId[this.state.报警类型字段]]\n        });\n        var content = \"\";\n        if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间超员\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"超员\" + cellMap[this.state.columnsId[this.state.处理状态字段]];else if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间缺员\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"缺员\" + cellMap[this.state.columnsId[this.state.处理状态字段]];else if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员串岗\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"串岗\" + cellMap[this.state.columnsId[this.state.处理状态字段]];else if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员滞留\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"滞留\" + cellMap[this.state.columnsId[this.state.处理状态字段]];else if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员一键紧急\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"紧急报警\" + cellMap[this.state.columnsId[this.state.处理状态字段]];else if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员长时间静止\") != -1) content = this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]]) + this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]]) + \"于\" + cellMap[this.state.columnsId[this.state.报警时间字段]] + \"长时间静止\" + cellMap[this.state.columnsId[this.state.处理状态字段]];\n        this.setState({\n          bjDetailContent: content\n        });\n        if (cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间超员\") != -1 || cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间缺员\") != -1 || cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员串岗\") != -1 || cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员滞留\") != -1) $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"确认报警\");else $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"报警已处理\");\n        $(\"#bj_detail_dialog_div\").css(\"display\", \"block\");\n      } else {\n        this.state.bjDetailCode = \"\";\n        this.setState({\n          bjDetailTitle: \"\"\n        });\n        this.setState({\n          bjDetailContent: \"\"\n        });\n        $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"\");\n        $(\"#bj_detail_dialog_div\").css(\"display\", \"none\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          bjqySelectList = _this$state.bjqySelectList,\n          bjlxSelectList = _this$state.bjlxSelectList,\n          bjList = _this$state.bjList,\n          columnsId = _this$state.columnsId,\n          实体名称字段 = _this$state.实体名称字段,\n          围栏名称字段 = _this$state.围栏名称字段,\n          报警类型字段 = _this$state.报警类型字段,\n          报警时间字段 = _this$state.报警时间字段,\n          bjDetailTitle = _this$state.bjDetailTitle,\n          bjDetailContent = _this$state.bjDetailContent;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bjInfoPage_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bj_detail_dialog_div\",\n        id: \"bj_detail_dialog_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"main_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"close_span\",\n        onClick: this.showBjDetailDialogDiv.bind(this, null, null, 0),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }\n      }, \"X\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }\n      }, bjDetailTitle), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, bjDetailContent), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"confirm_but_div\",\n        id: \"confirm_but_div\",\n        onClick: this.showDeleteAlert.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"top_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }\n      }, \"\\u62A5\\u8B66\\u4FE1\\u606F\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"back_but_div\",\n        onClick: this.goPage.bind(this, 'home'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }\n      }, \"<\\u8FD4\\u56DE\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"where_search_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        className: \"quyu_select\",\n        id: \"quyu_select\",\n        onChange: this.initListByMenuId.bind(this, true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }\n      }, \"\\u533A\\u57DF\"), bjqySelectList ? bjqySelectList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: item.默认字段组.名称,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 29\n          }\n        }, item.默认字段组.名称);\n      }) : /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 27\n        }\n      }, \"\\u6682\\u65E0\\u6570\\u636E\")), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"bjlx_select\",\n        id: \"bjlx_select\",\n        onChange: this.initListByMenuId.bind(this, true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }\n      }, \"\\u62A5\\u8B66\\u7C7B\\u578B\"), bjlxSelectList ? bjlxSelectList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: item.value,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 29\n          }\n        }, item.title);\n      }) : /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 27\n        }\n      }, \"\\u6682\\u65E0\\u6570\\u636E\")), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"yjqr_but\",\n        onClick: this.confirmAll.bind(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 17\n        }\n      }, \"\\u4E00\\u952E\\u786E\\u8BA4\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bj_list_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }\n      }, bjList ? bjList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"item_div\",\n          onClick: _this2.showBjDetailDialogDiv.bind(_this2, item.cellMap, item.code, 1),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"logo_img\",\n          src: item.cellMap[columnsId[报警类型字段]].indexOf(\"车间超员\") != -1 || item.cellMap[columnsId[报警类型字段]].indexOf(\"车间缺员\") != -1 ? cjcyImg : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员串岗\") != -1 || item.cellMap[columnsId[报警类型字段]].indexOf(\"人员滞留\") != -1 ? rycgImg : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员一键紧急\") != -1 ? ryyjjjImg : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员长时间静止\") != -1 ? rycsjjzImg : \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bjlx_div\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 29\n          }\n        }, item.cellMap[columnsId[报警类型字段]]), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bjnr_div\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 29\n          }\n        }, item.cellMap[columnsId[报警类型字段]].indexOf(\"车间超员\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + \"超员\" : item.cellMap[columnsId[报警类型字段]].indexOf(\"车间缺员\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + \"缺员\" : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员串岗\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + _this2.substringItemName(item.cellMap[columnsId[实体名称字段]]) + \"串岗\" : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员滞留\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + _this2.substringItemName(item.cellMap[columnsId[实体名称字段]]) + \"滞留\" : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员一键紧急\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + _this2.substringItemName(item.cellMap[columnsId[实体名称字段]]) + \"紧急报警\" : item.cellMap[columnsId[报警类型字段]].indexOf(\"人员长时间静止\") != -1 ? _this2.substringItemName(item.cellMap[columnsId[围栏名称字段]]) + _this2.substringItemName(item.cellMap[columnsId[实体名称字段]]) + \"长时间静止\" : item.cellMap[columnsId[围栏名称字段]] + item.cellMap[columnsId[实体名称字段]]), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bjsj_div\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 29\n          }\n        }, item.cellMap[columnsId[报警时间字段]]));\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 23\n        }\n      }, \"\\u6682\\u65E0\\u6570\\u636E\")));\n    }\n  }]);\n\n  return BjInfo;\n}(Component);\n\nexport default withRouter(BjInfo);","map":{"version":3,"sources":["E:/我的文件/智能称重系统/手机端项目/chq_zncz_mobile/src/pages/bjInfo/index.js"],"names":["withRouter","React","Component","Super","cjcyImg","rycgImg","ryyjjjImg","rycsjjzImg","$","alert","BjInfo","state","menuId","selectIds","bjqyId","bjlxId","fieldIds","bjlxFieldId","bjqyFieldId","bjlxSelectList","bjqySelectList","bjList","columnsId","criteriasFieldKey","实体名称字段","处理状态字段","围栏名称字段","报警类型字段","报警时间字段","报警类型数据库里名称","紧急报警","缺员报警","超员报警","串岗报警","滞留报警","静止报警","报警类型手机端显示名称","缺员超员报警","串岗滞留报警","bjDetailTitle","bjDetailContent","bjDetailCode","request","initListByMenuId","initColumnsId","resColumns","map","item","index","title","id","setState","reload","quyu","val","bjlxs","super","url","method","query","criteria_32","criteria_33","criteria_37","then","res","ltmpl","criterias","fieldId","fieldKey","initBJQYSelect","initSelect","columns","initListByQueryKey","queryKey","pageSize","entities","selectId","optionsMap","数据库里报警类型","手机端报警类型","bjlxSelectItem","exist","value","checkBjlxExistInSelect","push","bjlxList","result","showDeleteAlert","text","onPress","handelState","code","console","log","data","status","success","showBjDetailDialogDiv","info","confirmAll","codes","substring","goPage","props","history","css","split","cellMap","show","content","indexOf","substringItemName","bind","默认字段组","名称"],"mappings":"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","sourcesContent":["import {withRouter} from \"react-router-dom\";\r\nimport React, {Component} from 'react'\r\nimport Super from \"../../super\"\r\nimport \"./index.less\";\r\nimport cjcyImg from \"../../image/011.png\";\r\nimport rycgImg from \"../../image/012.png\";\r\nimport ryyjjjImg from \"../../image/013.png\";\r\nimport rycsjjzImg from \"../../image/014.png\";\r\nimport $ from \"jquery\";\r\nimport {Toast} from \"antd-mobile\";\r\nimport alert from \"antd-mobile/lib/modal/alert\";\r\n\r\nclass BjInfo extends Component{\r\n    state={menuId:28,selectIds:{bjqyId:\"\",bjlxId:\"\"},fieldIds:{bjlxFieldId:\"\",bjqyFieldId:\"\"},bjlxSelectList:[],bjqySelectList:[],bjList:[],\r\n        columnsId:{},\r\n        criteriasFieldKey:{},\r\n        实体名称字段:\"实体名称\",\r\n        处理状态字段:\"处理状态\",\r\n        围栏名称字段:\"围栏名称\",\r\n        报警类型字段:\"报警类型\",\r\n        报警时间字段:\"报警时间\",\r\n        // 实体名称:208,\r\n        // 处理状态:209,\r\n        // 围栏名称:204,\r\n        // 报警类型:210,\r\n        // 报警时间:206,\r\n        报警类型数据库里名称:{紧急报警:\"人员一键紧急报警\",缺员报警:\"车间缺员报警\",超员报警:\"车间超员报警\",串岗报警:\"人员串岗报警\",滞留报警:\"人员滞留报警\",静止报警:\"人员长时间静止报警\"},\r\n        报警类型手机端显示名称:{紧急报警:\"一键紧急报警\",缺员超员报警:\"车间缺员、超员报警\",串岗滞留报警:\"人员串岗、滞留报警\",静止报警:\"静止报警\"},\r\n        bjDetailTitle:\"\",bjDetailContent:\"\",bjDetailCode:\"\"}\r\n\r\n    componentDidMount(){\r\n        $(\"html\").css(\"background-color\",\"#fff\");\r\n        this.request();\r\n    }\r\n    request=()=>{\r\n        this.initListByMenuId(false);\r\n    }\r\n    initColumnsId=(resColumns)=>{\r\n        let columnsId={};\r\n        resColumns.map((item,index)=>{\r\n            //console.log(item.title+\",\"+item.id)\r\n            columnsId[item.title]=item.id;\r\n        });\r\n        //console.log(columnsId)\r\n        this.setState({columnsId:columnsId});\r\n    }\r\n    initListByMenuId=(reload)=>{\r\n        let quyu=$(\"#quyu_select\").val();\r\n        let bjlxs=$(\"#bjlx_select\").val();\r\n        //console.log(\"bjlxs===\"+bjlxs)\r\n        Super.super({\r\n            url:`api2/entity/${this.state.menuId}/list/tmpl`,\r\n            method:'GET',\r\n            query:{criteria_32:bjlxs,criteria_33:\"待处理\",criteria_37:quyu}\r\n            //query:query\r\n        }).then((res) => {\r\n            //console.log(res);\r\n            if(!reload){\r\n                let criteriasFieldKey={};\r\n                res.ltmpl.criterias.map((item,index)=>{\r\n                    if(item.id==32){\r\n                        this.state.selectIds.bjlxId=item.id;\r\n                        this.state.fieldIds.bjlxFieldId=item.fieldId;\r\n                    }\r\n                    else if(item.id==37){\r\n                        this.state.selectIds.bjqyId=item.id;\r\n                        this.state.fieldIds.bjqyFieldId=item.fieldId;\r\n                    }\r\n\r\n                    criteriasFieldKey[item.title]=item.fieldKey;\r\n                });\r\n                this.setState({criteriasFieldKey:criteriasFieldKey});\r\n                /*\r\n                let bjqyId=this.state.selectIds.bjqyId;\r\n                let bjqyFieldId=this.state.fieldIds.bjqyFieldId;\r\n                this.initSelect(bjqyId,bjqyFieldId);\r\n                 */\r\n                this.initBJQYSelect();\r\n\r\n                let bjlxId=this.state.selectIds.bjlxId;\r\n                let bjlxFieldId=this.state.fieldIds.bjlxFieldId;\r\n                this.initSelect(bjlxId,bjlxFieldId);\r\n                this.initColumnsId(res.ltmpl.columns);\r\n            }\r\n            this.initListByQueryKey(res.queryKey);\r\n        })\r\n    }\r\n    initListByQueryKey=(queryKey)=>{\r\n        Super.super({\r\n            url:`api2/entity/list/${queryKey}/data`,\r\n            method:'GET',\r\n            query:{pageSize:100}\r\n        }).then((res) => {\r\n            //console.log(\"===\"+JSON.stringify(res));\r\n            this.setState({bjList:res.entities});\r\n        })\r\n    }\r\n    initSelect=(selectId,fieldId)=>{\r\n        Super.super({\r\n            url:`api2/meta/dict/field_options`,\r\n            method:'GET',\r\n            query: {fieldIds:fieldId}\r\n        }).then((res) => {\r\n            //console.log(\"fieldId===\"+JSON.stringify(res.optionsMap[fieldId]));\r\n            if(selectId==32){\r\n                let bjlxSelectList=[];\r\n                res.optionsMap[fieldId].map((item,index)=>{\r\n                    let 数据库里报警类型=this.state.报警类型数据库里名称;\r\n                    let 手机端报警类型=this.state.报警类型手机端显示名称;\r\n                    let bjlxSelectItem;\r\n                    let exist=false;\r\n                    switch (item.title) {\r\n                        case 数据库里报警类型.紧急报警:\r\n                            bjlxSelectItem={title:手机端报警类型.紧急报警,value:数据库里报警类型.紧急报警}\r\n                            break;\r\n                        case 数据库里报警类型.缺员报警:\r\n                        case 数据库里报警类型.超员报警:\r\n                            exist=this.checkBjlxExistInSelect(bjlxSelectList,手机端报警类型.缺员超员报警)\r\n                            bjlxSelectItem={title:手机端报警类型.缺员超员报警,value:数据库里报警类型.缺员报警+\",\"+数据库里报警类型.超员报警}\r\n                            break;\r\n                        case 数据库里报警类型.滞留报警:\r\n                        case 数据库里报警类型.串岗报警:\r\n                            exist=this.checkBjlxExistInSelect(bjlxSelectList,手机端报警类型.串岗滞留报警)\r\n                            bjlxSelectItem={title:手机端报警类型.串岗滞留报警,value:数据库里报警类型.滞留报警+\",\"+数据库里报警类型.串岗报警}\r\n                            break;\r\n                        case 数据库里报警类型.静止报警:\r\n                            bjlxSelectItem={title:手机端报警类型.静止报警,value:数据库里报警类型.静止报警}\r\n                            break;\r\n                    }\r\n                    if(!exist)\r\n                        bjlxSelectList.push(bjlxSelectItem);\r\n                });\r\n                this.setState({bjlxSelectList:bjlxSelectList});\r\n            }\r\n            else if(selectId==37)\r\n                this.setState({bjqySelectList:res.optionsMap[fieldId]});\r\n        })\r\n    }\r\n    checkBjlxExistInSelect=(bjlxList,title)=>{\r\n        let exist=false;\r\n        bjlxList.map((item,index)=>{\r\n            if(item.title==title){\r\n                exist=true;\r\n                return exist;\r\n            }\r\n        });\r\n        return exist;\r\n    }\r\n    initBJQYSelect=()=>{\r\n        Super.super({\r\n            url:`api2/ks/clist/elefence/list/data`,\r\n            method:'GET',\r\n            query:{pageSize:100}\r\n        }).then((res) => {\r\n            //console.log(res);\r\n            this.setState({bjqySelectList:res.result.entities});\r\n        })\r\n    }\r\n    substringItemName(value){\r\n        if(value){\r\n            return value.split(\"@R@\")[1];\r\n        }\r\n        else\r\n            return \"\"\r\n    }\r\n    showBjDetailDialogDiv(cellMap,code,show){\r\n        //console.log(cellMap);\r\n        if(show==1){\r\n            this.state.bjDetailCode=code;\r\n            this.setState({bjDetailTitle:cellMap[this.state.columnsId[this.state.报警类型字段]]});\r\n            let content=\"\";\r\n            if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间超员\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"超员\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            else if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间缺员\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"缺员\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            else if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员串岗\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"串岗\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            else if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员滞留\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"滞留\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            else if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员一键紧急\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"紧急报警\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            else if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员长时间静止\")!=-1)\r\n                content=this.substringItemName(cellMap[this.state.columnsId[this.state.围栏名称字段]])+this.substringItemName(cellMap[this.state.columnsId[this.state.实体名称字段]])+\"于\"+cellMap[this.state.columnsId[this.state.报警时间字段]]+\"长时间静止\"+cellMap[this.state.columnsId[this.state.处理状态字段]];\r\n            this.setState({bjDetailContent:content});\r\n\r\n            if(cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间超员\")!=-1||cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"车间缺员\")!=-1||\r\n                cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员串岗\")!=-1||cellMap[this.state.columnsId[this.state.报警类型字段]].indexOf(\"人员滞留\")!=-1)\r\n                $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"确认报警\");\r\n            else\r\n                $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"报警已处理\");\r\n            $(\"#bj_detail_dialog_div\").css(\"display\",\"block\");\r\n        }\r\n        else{\r\n            this.state.bjDetailCode=\"\";\r\n            this.setState({bjDetailTitle:\"\"});\r\n            this.setState({bjDetailContent:\"\"});\r\n            $(\"#bj_detail_dialog_div #confirm_but_div\").text(\"\");\r\n            $(\"#bj_detail_dialog_div\").css(\"display\",\"none\");\r\n        }\r\n    }\r\n    showDeleteAlert = () => {\r\n        //alert(this.bjDetailCode);\r\n        alert(\"处理操作\",\"确认处理这条记录吗???\",[{\r\n                text:\"取消\"\r\n            },\r\n            {\r\n                text:\"确认\",\r\n                onPress:()=>this.handelState(this.state.bjDetailCode)\r\n            }\r\n        ])\r\n    }\r\n    handelState=(code)=>{\r\n        console.log(\"code===\"+code);\r\n        let data={};\r\n        data['唯一编码']=code;\r\n        data[this.state.criteriasFieldKey[this.state.处理状态字段]]=\"已处理\";\r\n        Super.super({\r\n            url: `api2/entity/${this.state.menuId}/detail/normal/`,\r\n            method:'post',\r\n            data: data\r\n        }).then((res) => {\r\n            //console.log(\"res===\"+JSON.stringify(res));\r\n            if(res.status === \"suc\") {\r\n                Toast.success(\"处理成功！\") //刷新列表\r\n                this.showBjDetailDialogDiv(null,null,0);\r\n                this.initListByMenuId(true);\r\n            } else {\r\n                Toast.info('处理失败！')\r\n            }\r\n        })\r\n    }\r\n    confirmAll=()=>{\r\n        let codes=\"\";\r\n        this.state.bjList.map((item,index)=>{\r\n            codes+=\",\"+item.code;\r\n        });\r\n        this.state.bjDetailCode=codes.substring(1);\r\n        console.log(this.state.bjDetailCode);\r\n        this.showDeleteAlert();\r\n    }\r\n    goPage=(value)=>{\r\n        this.props.history.push(`/${value}`);\r\n    }\r\n\r\n    render(){\r\n        const {bjqySelectList,bjlxSelectList,bjList,columnsId,\r\n            实体名称字段,围栏名称字段,报警类型字段,报警时间字段,\r\n            bjDetailTitle,bjDetailContent}=this.state\r\n        return <div className=\"bjInfoPage_div\">\r\n            <div className=\"bj_detail_dialog_div\" id=\"bj_detail_dialog_div\">\r\n                <div className=\"main_div\">\r\n                    <span className=\"close_span\" onClick={this.showBjDetailDialogDiv.bind(this,null,null,0)}>X</span>\r\n                    <div className=\"title_div\">{bjDetailTitle}</div>\r\n                    <div className=\"content_div\">{bjDetailContent}</div>\r\n                    <div className=\"confirm_but_div\" id=\"confirm_but_div\" onClick={this.showDeleteAlert.bind(this)}></div>\r\n                </div>\r\n            </div>\r\n            <div className=\"top_div\">报警信息</div>\r\n            <div className=\"back_but_div\" onClick={this.goPage.bind(this,'home')}>&lt;返回</div>\r\n            <div className=\"where_search_div\">\r\n                <select className=\"quyu_select\" id=\"quyu_select\" onChange={this.initListByMenuId.bind(this,true)}>\r\n                    <option value=\"\">区域</option>\r\n                    {\r\n                        bjqySelectList?bjqySelectList.map((item,index)=>\r\n                            <option value={item.默认字段组.名称}>{item.默认字段组.名称}</option>\r\n                        ):<option>暂无数据</option>\r\n                    }\r\n                </select>\r\n                <select className=\"bjlx_select\" id=\"bjlx_select\" onChange={this.initListByMenuId.bind(this,true)}>\r\n                    <option value=\"\">报警类型</option>\r\n                    {\r\n                        bjlxSelectList?bjlxSelectList.map((item,index)=>\r\n                            <option value={item.value}>{item.title}</option>\r\n                        ):<option>暂无数据</option>\r\n                    }\r\n                </select>\r\n                <button className=\"yjqr_but\" onClick={this.confirmAll.bind()}>一键确认</button>\r\n            </div>\r\n            <div className=\"bj_list_div\">\r\n                {\r\n                    bjList?bjList.map((item,index)=>\r\n                        <div className=\"item_div\" onClick={this.showBjDetailDialogDiv.bind(this,item.cellMap,item.code,1)}>\r\n                            <img className=\"logo_img\" src={\r\n                                item.cellMap[columnsId[报警类型字段]].indexOf(\"车间超员\")!=-1||item.cellMap[columnsId[报警类型字段]].indexOf(\"车间缺员\")!=-1 ? cjcyImg :\r\n                                    item.cellMap[columnsId[报警类型字段]].indexOf(\"人员串岗\")!=-1||item.cellMap[columnsId[报警类型字段]].indexOf(\"人员滞留\")!=-1?rycgImg:\r\n                                        item.cellMap[columnsId[报警类型字段]].indexOf(\"人员一键紧急\")!=-1?ryyjjjImg:\r\n                                            item.cellMap[columnsId[报警类型字段]].indexOf(\"人员长时间静止\")!=-1?rycsjjzImg:\"\"\r\n                            }/>\r\n                            <div className=\"bjlx_div\">{item.cellMap[columnsId[报警类型字段]]}</div>\r\n                            <div className=\"bjnr_div\">\r\n                                {\r\n                                    item.cellMap[columnsId[报警类型字段]].indexOf(\"车间超员\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+\"超员\":\r\n                                        item.cellMap[columnsId[报警类型字段]].indexOf(\"车间缺员\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+\"缺员\":\r\n                                            item.cellMap[columnsId[报警类型字段]].indexOf(\"人员串岗\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+this.substringItemName(item.cellMap[columnsId[实体名称字段]])+\"串岗\":\r\n                                                item.cellMap[columnsId[报警类型字段]].indexOf(\"人员滞留\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+this.substringItemName(item.cellMap[columnsId[实体名称字段]])+\"滞留\":\r\n                                                    item.cellMap[columnsId[报警类型字段]].indexOf(\"人员一键紧急\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+this.substringItemName(item.cellMap[columnsId[实体名称字段]])+\"紧急报警\":\r\n                                                        item.cellMap[columnsId[报警类型字段]].indexOf(\"人员长时间静止\")!=-1?this.substringItemName(item.cellMap[columnsId[围栏名称字段]])+this.substringItemName(item.cellMap[columnsId[实体名称字段]])+\"长时间静止\":\r\n                                                            item.cellMap[columnsId[围栏名称字段]]+item.cellMap[columnsId[实体名称字段]]\r\n                                }\r\n                            </div>\r\n                            <div className=\"bjsj_div\">{item.cellMap[columnsId[报警时间字段]]}</div>\r\n                        </div>\r\n                    ):<div>暂无数据</div>\r\n                }\r\n                {/*\r\n                <div className=\"item_div\">\r\n                    <img className=\"logo_img\" src={cjcyImg}/>\r\n                    <div className=\"bjlx_div\">报警类型</div>\r\n                    <div className=\"bjnr_div\">报警内容</div>\r\n                    <div className=\"bjsj_div\">1997-07-01</div>\r\n                </div>\r\n                */}\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(BjInfo)"]},"metadata":{},"sourceType":"module"}