{"ast":null,"code":"import \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport superagent from 'superagent';\nimport Units from './../units';\nvar api = Units.api();\n\nvar Superagent = /*#__PURE__*/function () {\n  function Superagent() {\n    _classCallCheck(this, Superagent);\n  }\n\n  _createClass(Superagent, null, [{\n    key: \"super\",\n    value: function _super(options, type) {\n      var tokenName = Units.getLocalStorge(\"tokenName\");\n      var ty = \"form\";\n      var method = options.method ? options.method : \"POST\";\n\n      if (type === \"formdata\") {\n        ty = null;\n      } else if (type === \"json\") {\n        ty = \"application/json\";\n      }\n\n      return new Promise(function (resolve, reject) {\n        superagent(method, Units.api() + options.url).type(ty).set(\"hydrocarbon-token\", tokenName).query(options.query || '').send(options.data || '').end(function (req, res) {\n          //console.log(res.body)\n          if (res.status === 200) {\n            Units.setLocalStorge(\"tokenName\", tokenName);\n            resolve(res.body);\n          } else if (res.status === 403) {\n            _Toast.info(\"请求权限不足,可能是token已经超时\");\n\n            window.location.hash = \"/login\";\n          } else if (res.status === 404 || res.status === 504) {\n            _Toast.info(\"服务器未开···\");\n          } else if (res.status === 500) {\n            _Toast.info(\"后台处理错误。\");\n          } else {\n            reject(res.body);\n          }\n        });\n      });\n    }\n  }]);\n\n  return Superagent;\n}();\n\nexport { Superagent as default };","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/super/index.js"],"names":["superagent","Units","api","Superagent","options","type","tokenName","getLocalStorge","ty","method","Promise","resolve","reject","url","set","query","send","data","end","req","res","status","setLocalStorge","body","info","window","location","hash"],"mappings":";;;;AAAA,OAAOA,UAAP,MAAuB,YAAvB;AAEA,OAAOC,KAAP,MAAkB,YAAlB;AAEA,IAAMC,GAAG,GAACD,KAAK,CAACC,GAAN,EAAV;;IACqBC,U;;;;;;;2BACPC,O,EAAQC,I,EAAM;AAC1B,UAAMC,SAAS,GAAGL,KAAK,CAACM,cAAN,CAAqB,WAArB,CAAlB;AACA,UAAIC,EAAE,GAAC,MAAP;AACA,UAAIC,MAAM,GAACL,OAAO,CAACK,MAAR,GAAeL,OAAO,CAACK,MAAvB,GAA8B,MAAzC;;AACM,UAAGJ,IAAI,KAAG,UAAV,EAAqB;AACjBG,QAAAA,EAAE,GAAC,IAAH;AACH,OAFD,MAEM,IAAGH,IAAI,KAAG,MAAV,EAAiB;AACnBG,QAAAA,EAAE,GAAC,kBAAH;AACH;;AACP,aAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCZ,QAAAA,UAAU,CAACS,MAAD,EAAQR,KAAK,CAACC,GAAN,KAAYE,OAAO,CAACS,GAA5B,CAAV,CACER,IADF,CACOG,EADP,EAEEM,GAFF,CAEM,mBAFN,EAE2BR,SAF3B,EAGES,KAHF,CAGQX,OAAO,CAACW,KAAR,IAAiB,EAHzB,EAIEC,IAJF,CAIOZ,OAAO,CAACa,IAAR,IAAgB,EAJvB,EAKEC,GALF,CAKM,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClB;AACA,cAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAuB;AACtBpB,YAAAA,KAAK,CAACqB,cAAN,CAAqB,WAArB,EAAiChB,SAAjC;AACAK,YAAAA,OAAO,CAACS,GAAG,CAACG,IAAL,CAAP;AACA,WAHD,MAGO,IAAGH,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAuB;AAC7B,mBAAMG,IAAN,CAAW,qBAAX;;AACAC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACA,WAHM,MAGA,IAAGP,GAAG,CAACC,MAAJ,KAAe,GAAf,IAAsBD,GAAG,CAACC,MAAJ,KAAe,GAAxC,EAA6C;AACnD,mBAAMG,IAAN,CAAW,UAAX;AACA,WAFM,MAEA,IAAGJ,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAuB;AAC7B,mBAAMG,IAAN,CAAW,SAAX;AACA,WAFM,MAEA;AACNZ,YAAAA,MAAM,CAACQ,GAAG,CAACG,IAAL,CAAN;AACA;AACD,SApBF;AAqBA,OAtBM,CAAP;AAuBA;;;;;;SAjCmBpB,U","sourcesContent":["import superagent from 'superagent'\r\nimport { Toast } from 'antd-mobile';\r\nimport Units from './../units'\r\n\r\nconst api=Units.api()\r\nexport default class Superagent {\r\n\tstatic super(options,type) {\r\n\t\tconst tokenName = Units.getLocalStorge(\"tokenName\")\r\n\t\tlet ty=\"form\"\r\n\t\tlet method=options.method?options.method:\"POST\";\r\n        if(type===\"formdata\"){\r\n            ty=null\r\n        }else if(type===\"json\"){\r\n            ty=\"application/json\"\r\n        }\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsuperagent(method,Units.api()+options.url)\r\n\t\t\t\t.type(ty)\r\n\t\t\t\t.set(\"hydrocarbon-token\", tokenName)\r\n\t\t\t\t.query(options.query || '')\r\n\t\t\t\t.send(options.data || '')\r\n\t\t\t\t.end((req, res) => {\r\n\t\t\t\t\t//console.log(res.body)\r\n\t\t\t\t\tif(res.status === 200) {\r\n\t\t\t\t\t\tUnits.setLocalStorge(\"tokenName\",tokenName)\r\n\t\t\t\t\t\tresolve(res.body)\r\n\t\t\t\t\t} else if(res.status === 403) {\r\n\t\t\t\t\t\tToast.info(\"请求权限不足,可能是token已经超时\")\r\n\t\t\t\t\t\twindow.location.hash = \"/login\";\r\n\t\t\t\t\t} else if(res.status === 404 || res.status === 504) {\r\n\t\t\t\t\t\tToast.info(\"服务器未开···\")\r\n\t\t\t\t\t} else if(res.status === 500) {\r\n\t\t\t\t\t\tToast.info(\"后台处理错误。\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(res.body)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}