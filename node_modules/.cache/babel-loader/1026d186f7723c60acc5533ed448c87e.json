{"ast":null,"code":"import \"antd-mobile/es/icon/style\";\nimport _Icon from \"antd-mobile/es/icon\";\nimport \"antd-mobile/es/accordion/style\";\nimport _Accordion from \"antd-mobile/es/accordion\";\nimport \"antd-mobile/es/list/style\";\nimport _List from \"antd-mobile/es/list\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport \"antd-mobile/es/popover/style\";\nimport _Popover from \"antd-mobile/es/popover\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\src\\\\pages\\\\home\\\\index.js\";\nimport React, { Component } from 'react';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport Super from \"../../super\";\nimport Nav from '../../components/Nav';\nimport Storage from './../../units/storage';\nimport './index.less';\nvar Item = _Popover.Item;\n\nvar Home = /*#__PURE__*/function (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      menuTreeNode: []\n    };\n\n    _this.request = function () {\n      Super.super({\n        url: 'api2/meta/menu/get_blocks'\n      }).then(function (res) {\n        var currentBlockId = res.currentBlockId;\n\n        _this.setBlocks(currentBlockId, res.blocks);\n\n        var homeData = _this.renderdata(res.blocks);\n\n        _this.setState({\n          homeData: homeData,\n          blocks: res.blocks\n        });\n      });\n    };\n\n    _this.setBlocks = function (blockId, resBlocks) {\n      var blocks = _this.state.blocks;\n      var blockList;\n\n      if (resBlocks) {\n        blocks = resBlocks;\n      }\n\n      blocks.forEach(function (item) {\n        if (item.id === blockId) {\n          blockList = item.l1Menus;\n        }\n      });\n\n      var menuTreeNode = _this.renderMenu(blockList);\n\n      var data = _this.renderdata(blockList);\n\n      Storage.menuList = data; //普通菜单存储\n\n      _this.setState({\n        menuTreeNode: menuTreeNode\n      });\n    };\n\n    _this.renderdata = function (data) {\n      data.forEach(function (item) {\n        item.value = item.id;\n        item.label = item.title;\n\n        if (item.l2Menus) {\n          item.children = item.l2Menus;\n          item.children.forEach(function (it) {\n            it.value = it.id;\n            it.label = it.title;\n          });\n        }\n      });\n      return data;\n    };\n\n    _this.renderMenu = function (data) {\n      return data.map(function (item) {\n        if (item.l2Menus) {\n          return /*#__PURE__*/React.createElement(_Accordion.Panel, {\n            header: item.title,\n            key: item.title,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 12\n            }\n          }, /*#__PURE__*/React.createElement(_List, {\n            className: \"my-list\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }\n          }, _this.renderMenu(item.l2Menus)));\n        }\n\n        return /*#__PURE__*/React.createElement(_List.Item, {\n          key: item.title,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(NavLink, {\n          to: \"/\".concat(item.id),\n          style: {\n            color: \"#333\"\n          },\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }\n        }, item.title), /*#__PURE__*/React.createElement(_Icon, {\n          type: \"right\",\n          size: \"sm\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }\n        }));\n      });\n    };\n\n    _this.handlePop = function (value) {\n      _this.props.history.push(\"/\".concat(value));\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.request();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var menuTreeNode = this.state.menuTreeNode;\n      var homePop = [\n      /*#__PURE__*/\n      //右边导航下拉\n      React.createElement(Item, {\n        key: \"1\",\n        value: \"user\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 38\n          }\n        }, \"\\uE74C\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 5\n        }\n      }, \"\\u7528\\u6237\"), /*#__PURE__*/React.createElement(Item, {\n        key: \"2\",\n        value: \"login\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 39\n          }\n        }, \"\\uE739\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 5\n        }\n      }, \"\\u9000\\u51FA\")];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        title: \"HYDROCARBON\",\n        data: homeData,\n        handleSelected: this.handlePop,\n        pops: homePop,\n        level: 1,\n        setBlocks: this.setBlocks,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"menuTreeNode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Accordion, {\n        accordion: true,\n        key: \"menuTreeNode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, menuTreeNode)));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default withRouter(Home);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/pages/home/index.js"],"names":["React","Component","NavLink","withRouter","Super","Nav","Storage","Item","Home","state","menuTreeNode","request","super","url","then","res","currentBlockId","setBlocks","blocks","homeData","renderdata","setState","blockId","resBlocks","blockList","forEach","item","id","l1Menus","renderMenu","data","menuList","value","label","title","l2Menus","children","it","map","color","handlePop","props","history","push","homePop"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport { Icon, Accordion, List, Popover } from 'antd-mobile';\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport Super from \"../../super\"\r\nimport Nav from '../../components/Nav'\r\nimport Storage from './../../units/storage'\r\nimport './index.less'\r\nconst Item = Popover.Item;\r\n\r\nclass Home extends Component {\r\n\tstate = {\r\n\t\tmenuTreeNode: [],\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.request()\r\n\t}\r\n\trequest = () => {\r\n\t\tSuper.super({\r\n\t\t\turl: 'api2/meta/menu/get_blocks',\r\n\t\t}).then((res) => {\r\n\t\t\tconst currentBlockId=res.currentBlockId\r\n\t\t\tthis.setBlocks(currentBlockId,res.blocks)\r\n\t\t\tconst homeData = this.renderdata(res.blocks)\r\n\t\t\tthis.setState({\r\n\t\t\t\thomeData,\r\n\t\t\t\tblocks:res.blocks,\r\n\t\t\t})\r\n\t\t})\r\n\t}\t\r\n\tsetBlocks=(blockId,resBlocks)=>{\r\n\t\tlet {blocks}=this.state\r\n\t\tlet blockList\r\n\t\tif(resBlocks){\r\n\t\t\tblocks=resBlocks\r\n\t\t}\r\n\t\tblocks.forEach((item)=>{\r\n\t\t\tif(item.id===blockId){\r\n\t\t\t\tblockList=item.l1Menus\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst menuTreeNode = this.renderMenu(blockList)\r\n\t\tconst data = this.renderdata(blockList)\r\n\t\tStorage.menuList=data   //普通菜单存储\r\n\t\tthis.setState({\r\n\t\t\tmenuTreeNode,\r\n\t\t})\r\n\t}\r\n\trenderdata = (data) => {\r\n\t\tdata.forEach((item) => {\r\n\t\t\titem.value = item.id\r\n\t\t\titem.label = item.title\r\n\t\t\tif(item.l2Menus) {\r\n\t\t\t\titem.children = item.l2Menus\r\n\t\t\t\titem.children.forEach((it) => {\r\n\t\t\t\t\tit.value = it.id\r\n\t\t\t\t\tit.label = it.title\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn data\r\n\t}\r\n\trenderMenu = (data) => {\r\n\t\treturn data.map((item) => {\r\n\t\t\tif(item.l2Menus) {\r\n\t\t\t\treturn <Accordion.Panel header={item.title} key={item.title}>\r\n                            <List className=\"my-list\">\r\n                                { this.renderMenu(item.l2Menus) }\r\n                            </List>\r\n                        </Accordion.Panel>\r\n\t\t\t}\r\n\t\t\treturn <List.Item key={item.title}>\r\n                        <NavLink to={`/${item.id}`} style={{color:\"#333\"}}>{item.title}</NavLink>\r\n                        <Icon type=\"right\" size=\"sm\"/>\r\n                    </List.Item>\r\n\t\t})\r\n\t}\r\n\thandlePop = (value) => {\r\n\t\tthis.props.history.push(`/${value}`)\r\n\t}\r\n\trender() {\r\n\t\tconst {menuTreeNode} = this.state;\r\n\t\tconst homePop = [ //右边导航下拉\r\n\t\t\t(<Item key=\"1\" value=\"user\" icon={<span className=\"iconfont\">&#xe74c;</span>}>用户</Item>),\r\n\t\t\t(<Item key=\"2\" value=\"login\" icon={<span className=\"iconfont\">&#xe739;</span>}>退出</Item>),\r\n\t\t]\r\n\t\treturn(\r\n\t\t\t<div className=\"home\">\r\n                <Nav \r\n                    title=\"HYDROCARBON\"\r\n                    data={homeData}\r\n                    handleSelected={this.handlePop}\r\n\t\t\t\t\tpops={homePop}\r\n\t\t\t\t\tlevel={1}\r\n\t\t\t\t\tsetBlocks={this.setBlocks}\r\n                />\r\n                <div className=\"menuTreeNode\">\r\n                    <Accordion accordion key=\"menuTreeNode\">\r\n                        {menuTreeNode}\r\n                    </Accordion>\r\n                </div>\r\n            </div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default withRouter(Home)"]},"metadata":{},"sourceType":"module"}