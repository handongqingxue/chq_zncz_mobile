{"ast":null,"code":"import \"antd-mobile/es/icon/style\";\nimport _Icon from \"antd-mobile/es/icon\";\nimport \"antd-mobile/es/toast/style\";\nimport _Toast from \"antd-mobile/es/toast\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport \"antd-mobile/es/popover/style\";\nimport _Popover from \"antd-mobile/es/popover\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\src\\\\pages\\\\testHome\\\\index.js\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport React, { Component } from 'react';\nimport Super from \"../../super\";\nimport Storage from \"../../units/storage\";\nimport \"./index.less\";\nimport ssdwImg from \"../../image/002.png\";\nimport bjtjImg from \"../../image/003.png\";\nimport ryzzImg from \"../../image/004.png\";\nimport $ from 'jquery';\nvar Item = _Popover.Item;\n\nvar TestHome = /*#__PURE__*/function (_Component) {\n  _inherits(TestHome, _Component);\n\n  function TestHome() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TestHome);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TestHome)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      homeState: [],\n      menuTreeNode: []\n    };\n\n    _this.initNavListDiv = function () {\n      var nldw = $(\"#nav_list_div\").css(\"width\"); //$(\"#nav_list_div\").css(\"height\",nldw);\n\n      var item_div_width = $(\".nav_list_div .item_div\").css(\"width\");\n      $(\".nav_list_div .item_div\").css(\"height\", item_div_width);\n    };\n\n    _this.request = function () {\n      Super.super({\n        url: 'api2/meta/menu/get_blocks'\n      }).then(function (res) {\n        var currentBlockId = res.currentBlockId;\n        console.log(res);\n\n        _this.setBlocks(currentBlockId, res.blocks);\n\n        var homeData = _this.renderData(res.blocks);\n\n        _this.setState({\n          homeData: homeData,\n          blocks: res.blocks\n        });\n      });\n    };\n\n    _this.setBlocks = function (blockId, resBlocks) {\n      _Toast.info(blockId);\n\n      var blocks = _this.state.blocks;\n      var blockList;\n\n      if (resBlocks) {\n        blocks = resBlocks;\n      }\n\n      blocks.forEach(function (item) {\n        if (item.id === blockId) {\n          blockList = item.l1Menus;\n        }\n      });\n\n      var menuTreeNode = _this.renderMenu(blockList);\n\n      var data = _this.renderData(blockList);\n\n      Storage.menuList = data; //普通菜单存储\n\n      console.log(menuTreeNode.length);\n\n      _this.setState({\n        menuTreeNode: menuTreeNode\n      });\n    };\n\n    _this.renderMenu = function (data) {\n      return data.map(function (item) {\n        if (item.l1Menus) return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 24\n          }\n        }, \"2:\", _this.renderMenu(item.l1Menus), /*#__PURE__*/React.createElement(_Icon, {\n          type: \"right\",\n          size: \"sm\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 62\n          }\n        }));else return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 24\n          }\n        }, \"1:\", item.title);\n      });\n    };\n\n    _this.renderData = function (data) {\n      data.forEach(function (item) {\n        item.value = item.id;\n        item.label = item.title;\n\n        if (item.l2Menus) {\n          item.children = item.l2Menus;\n          item.children.forEach(function (it) {\n            it.value = it.id;\n            it.label = it.title;\n          });\n        }\n      });\n      return data;\n    };\n\n    _this.goPage = function (value) {\n      _this.props.history.push(\"/\".concat(value));\n    };\n\n    return _this;\n  }\n\n  _createClass(TestHome, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.request();\n      this.initNavListDiv();\n      $(\"html\").css(\"background-color\", \"#154E6C\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"homePage_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"top_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, \"\\u8FB0\\u9E92\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7BA1\\u7406\\u7CFB\\u7EDF\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"nav_list_div\",\n        id: \"nav_list_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div ssdw_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ssdwImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, \"\\u5B9E\\u65F6\\u5B9A\\u4F4D\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div bjtj_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: bjtjImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      }, \"\\u62A5\\u8B66\\u7EDF\\u8BA1\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div ryzz_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ryzzImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, \"\\u4EBA\\u5458\\u8FFD\\u8E2A\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div lsgj_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ryzzImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, \"\\u5386\\u53F2\\u8F68\\u8FF9\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div dwpz_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ryzzImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }\n      }, \"\\u5B9A\\u4F4D\\u914D\\u7F6E\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item_div tcdl_div\",\n        onClick: this.goPage.bind(this, 'test'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ryzzImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }\n      }, \"\\u9000\\u51FA\\u767B\\u5F55\"))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, \"\\u7248\\u6743\\u6240\\u67092018-2020\\u8FB0\\u9E92\\u6570\\u7EF4\"));\n    }\n  }]);\n\n  return TestHome;\n}(Component);\n\nexport default withRouter(TestHome);","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/pages/testHome/index.js"],"names":["NavLink","withRouter","React","Component","Super","Storage","ssdwImg","bjtjImg","ryzzImg","$","Item","TestHome","state","homeState","menuTreeNode","initNavListDiv","nldw","css","item_div_width","request","super","url","then","res","currentBlockId","console","log","setBlocks","blocks","homeData","renderData","setState","blockId","resBlocks","info","blockList","forEach","item","id","l1Menus","renderMenu","data","menuList","length","map","title","value","label","l2Menus","children","it","goPage","props","history","push","bind"],"mappings":"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","sourcesContent":["import {NavLink, withRouter} from \"react-router-dom\";\r\nimport React, {Component} from 'react'\r\nimport Super from \"../../super\"\r\nimport {Accordion, Icon, List, Toast, Popover} from \"antd-mobile\";\r\nimport Storage from \"../../units/storage\";\r\nimport \"./index.less\";\r\nimport ssdwImg from \"../../image/002.png\";\r\nimport bjtjImg from \"../../image/003.png\";\r\nimport ryzzImg from \"../../image/004.png\";\r\nimport $ from 'jquery';\r\nconst Item = Popover.Item;\r\n\r\nclass TestHome extends Component{\r\n    state={homeState:[],menuTreeNode:[]}\r\n\r\n    componentDidMount() {\r\n        this.request();\r\n        this.initNavListDiv();\r\n        $(\"html\").css(\"background-color\",\"#154E6C\");\r\n    }\r\n    initNavListDiv=()=>{\r\n        let nldw=$(\"#nav_list_div\").css(\"width\");\r\n        //$(\"#nav_list_div\").css(\"height\",nldw);\r\n        let item_div_width=$(\".nav_list_div .item_div\").css(\"width\");\r\n        $(\".nav_list_div .item_div\").css(\"height\",item_div_width);\r\n    }\r\n    request = () => {\r\n        Super.super({\r\n            url: 'api2/meta/menu/get_blocks',\r\n        }).then((res) => {\r\n            const currentBlockId=res.currentBlockId;\r\n            console.log(res);\r\n            this.setBlocks(currentBlockId,res.blocks);\r\n            const homeData = this.renderData(res.blocks)\r\n            this.setState({\r\n                homeData,\r\n                blocks:res.blocks,\r\n            })\r\n        })\r\n    }\r\n    setBlocks=(blockId,resBlocks)=>{\r\n        Toast.info(blockId);\r\n        let {blocks}=this.state\r\n        let blockList\r\n        if(resBlocks){\r\n            blocks=resBlocks\r\n        }\r\n        blocks.forEach((item)=>{\r\n            if(item.id===blockId){\r\n                blockList=item.l1Menus\r\n            }\r\n        })\r\n        const menuTreeNode=this.renderMenu(blockList);\r\n        const data=this.renderData(blockList);\r\n        Storage.menuList=data   //普通菜单存储\r\n        console.log(menuTreeNode.length);\r\n        this.setState({menuTreeNode});\r\n    }\r\n    renderMenu=(data)=>{\r\n        return data.map((item)=>{\r\n            if(item.l1Menus)\r\n                return <div>2:{this.renderMenu(item.l1Menus)}<Icon type=\"right\" size=\"sm\"/></div>\r\n            else\r\n                return <div>1:{item.title}</div>\r\n        });\r\n    }\r\n    renderData=(data)=>{\r\n        data.forEach((item) => {\r\n            item.value = item.id\r\n            item.label = item.title\r\n            if(item.l2Menus) {\r\n                item.children = item.l2Menus\r\n                item.children.forEach((it) => {\r\n                    it.value = it.id\r\n                    it.label = it.title\r\n                })\r\n            }\r\n        })\r\n        return data\r\n    }\r\n\r\n    goPage = (value) => {\r\n        this.props.history.push(`/${value}`)\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"homePage_div\">\r\n                <div className=\"top_div\">辰麒人员定位管理系统</div>\r\n                <div className=\"nav_list_div\" id=\"nav_list_div\">\r\n                    <div className=\"item_div ssdw_div\">\r\n                        <img src={ssdwImg}/>\r\n                        <div className=\"text_div\">实时定位</div>\r\n                    </div>\r\n                    <div className=\"item_div bjtj_div\">\r\n                        <img src={bjtjImg}/>\r\n                        <div className=\"text_div\">报警统计</div>\r\n                    </div>\r\n                    <div className=\"item_div ryzz_div\">\r\n                        <img src={ryzzImg}/>\r\n                        <div className=\"text_div\">人员追踪</div>\r\n                    </div>\r\n                    <div className=\"item_div lsgj_div\">\r\n                        <img src={ryzzImg}/>\r\n                        <div className=\"text_div\">历史轨迹</div>\r\n                    </div>\r\n                    <div className=\"item_div dwpz_div\">\r\n                        <img src={ryzzImg}/>\r\n                        <div className=\"text_div\">定位配置</div>\r\n                    </div>\r\n                    <div className=\"item_div tcdl_div\" onClick={this.goPage.bind(this,'test')}>\r\n                        <img src={ryzzImg}/>\r\n                        <div className=\"text_div\">退出登录</div>\r\n                    </div>\r\n                </div>\r\n                <div>版权所有2018-2020辰麒数维</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(TestHome)"]},"metadata":{},"sourceType":"module"}