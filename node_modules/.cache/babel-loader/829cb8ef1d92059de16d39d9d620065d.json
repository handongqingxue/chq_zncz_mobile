{"ast":null,"code":"import _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd-mobile/es/popover/style\";\nimport _Popover from \"antd-mobile/es/popover\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\chq_position_app\\\\src\\\\pages\\\\user\\\\index.js\";\nimport React, { Component } from 'react';\nimport Nav from '../../components/Nav';\nimport Details from './../details';\nimport Super from './../../super';\nvar Item = _Popover.Item;\n\nvar User = /*#__PURE__*/function (_Component) {\n  _inherits(User, _Component);\n\n  function User() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, User);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(User)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      userName: \"\",\n      code: \"\"\n    };\n\n    _this.getUser = function () {\n      Super.super({\n        url: 'api2/meta/user/current_user'\n      }).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          userName: res.user.username,\n          code: res.user.id\n        });\n      });\n    };\n\n    _this.handlePop = function (value) {\n      if (value === \"save\") {\n        _this.Details.handleSubmit();\n      } else {\n        _this.props.history.push(\"/\".concat(value));\n      }\n    };\n\n    _this.onRef = function (ref) {\n      _this.Details = ref;\n    };\n\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUser();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var userPop = [\n      /*#__PURE__*/\n      //右边导航下拉\n      React.createElement(Item, {\n        key: \"1\",\n        value: \"home\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 38\n          }\n        }, \"\\uE74C\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 5\n        }\n      }, \"\\u9996\\u9875\"), /*#__PURE__*/React.createElement(Item, {\n        key: \"3\",\n        value: \"save\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 39\n          }\n        }, \" \\uE61A \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 5\n        }\n      }, \"\\u4FDD\\u5B58\"), /*#__PURE__*/React.createElement(Item, {\n        key: \"2\",\n        value: \"login\",\n        icon: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"iconfont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 39\n          }\n        }, \"\\uE74C\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 5\n        }\n      }, \"\\u9000\\u51FA\")];\n      var _this$state = this.state,\n          userName = _this$state.userName,\n          code = _this$state.code;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        title: userName,\n        handleSelected: this.handlePop,\n        pops: userPop,\n        isUserpage: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }\n      }), code ? /*#__PURE__*/React.createElement(Details, {\n        onRef: this.onRef,\n        menuId: \"user\",\n        code: code,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 12\n        }\n      }) : null);\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport { User as default };","map":{"version":3,"sources":["E:/我的文件/人员定位系统/chq_position_app/src/pages/user/index.js"],"names":["React","Component","Nav","Details","Super","Item","User","state","userName","code","getUser","super","url","then","res","console","log","setState","user","username","id","handlePop","value","handleSubmit","props","history","push","onRef","ref","userPop"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AAEA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,IAAMC,IAAI,GAAG,SAAQA,IAArB;;IAEqBC,I;;;;;;;;;;;;;;;UAEpBC,K,GAAM;AACLC,MAAAA,QAAQ,EAAC,EADJ;AAELC,MAAAA,IAAI,EAAC;AAFA,K;;UAQNC,O,GAAQ,YAAI;AACXN,MAAAA,KAAK,CAACO,KAAN,CAAY;AACXC,QAAAA,GAAG,EAAC;AADO,OAAZ,EAEGC,IAFH,CAEQ,UAACC,GAAD,EAAO;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,cAAKG,QAAL,CAAc;AACbT,UAAAA,QAAQ,EAACM,GAAG,CAACI,IAAJ,CAASC,QADL;AAEbV,UAAAA,IAAI,EAACK,GAAG,CAACI,IAAJ,CAASE;AAFD,SAAd;AAIA,OARD;AASA,K;;UACDC,S,GAAY,UAACC,KAAD,EAAW;AACtB,UAAGA,KAAK,KAAK,MAAb,EAAoB;AACnB,cAAKnB,OAAL,CAAaoB,YAAb;AACA,OAFD,MAEK;AACJ,cAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,YAA4BJ,KAA5B;AACA;AACD,K;;UACDK,K,GAAQ,UAACC,GAAD,EAAS;AAChB,YAAKzB,OAAL,GAAeyB,GAAf;AACA,K;;;;;;;wCAvBkB;AAClB,WAAKlB,OAAL;AACA;;;6BAsBQ;AACR,UAAMmB,OAAO,GAAG;AAAA;AAAE;AAChB,0BAAC,IAAD;AAAM,QAAA,GAAG,EAAC,GAAV;AAAc,QAAA,KAAK,EAAC,MAApB;AAA2B,QAAA,IAAI,eAAE;AAAM,UAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADc,eAEd,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAC,GAAV;AAAc,QAAA,KAAK,EAAC,MAApB;AAA2B,QAAA,IAAI,eAAG;AAAM,UAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFc,eAGd,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAC,GAAV;AAAc,QAAA,KAAK,EAAC,OAApB;AAA4B,QAAA,IAAI,eAAE;AAAM,UAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHc,CAAhB;AADQ,wBAMc,KAAKtB,KANnB;AAAA,UAMDC,QANC,eAMDA,QANC;AAAA,UAMQC,IANR,eAMQA,IANR;AAOR,0BACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACa,oBAAC,GAAD;AACI,QAAA,KAAK,EAAED,QADX;AAEI,QAAA,cAAc,EAAE,KAAKa,SAFzB;AAGX,QAAA,IAAI,EAAEQ,OAHK;AAIX,QAAA,UAAU,EAAC,MAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb,EAOGpB,IAAI,gBAAC,oBAAC,OAAD;AACH,QAAA,KAAK,EAAI,KAAKkB,KADX;AAEH,QAAA,MAAM,EAAC,MAFJ;AAGH,QAAA,IAAI,EAAElB,IAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAD,GAIA,IAXP,CADD;AAgBA;;;;EAtDgCR,S;;SAAbK,I","sourcesContent":["import React, {Component} from 'react'\r\nimport { Popover } from 'antd-mobile';\r\nimport Nav from '../../components/Nav'\r\nimport Details from './../details'\r\nimport Super from './../../super'\r\nconst Item = Popover.Item;\r\n\r\nexport default class User extends Component {\r\n\r\n\tstate={\r\n\t\tuserName:\"\",\r\n\t\tcode:\"\",\r\n\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.getUser()\r\n\t}\r\n\tgetUser=()=>{\r\n\t\tSuper.super({\r\n\t\t\turl:'api2/meta/user/current_user',                   \r\n\t\t}).then((res)=>{\r\n\t\t\tconsole.log(res);\r\n\t\t\tthis.setState({\r\n\t\t\t\tuserName:res.user.username,\r\n\t\t\t\tcode:res.user.id\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\thandlePop = (value) => {\r\n\t\tif(value === \"save\"){\r\n\t\t\tthis.Details.handleSubmit()\r\n\t\t}else{\r\n\t\t\tthis.props.history.push(`/${value}`)\r\n\t\t}\r\n\t}\r\n\tonRef = (ref) => {\r\n\t\tthis.Details = ref\r\n\t}\r\n\trender() {\r\n\t\tconst userPop = [ //右边导航下拉\r\n\t\t\t(<Item key=\"1\" value=\"home\" icon={<span className=\"iconfont\">&#xe74c;</span>}>首页</Item>),\r\n\t\t\t(<Item key=\"3\" value=\"save\" icon={ <span className=\"iconfont\" > &#xe61a; </span>}>保存</Item> ),\r\n\t\t\t(<Item key=\"2\" value=\"login\" icon={<span className=\"iconfont\">&#xe74c;</span>}>退出</Item>),\r\n\t\t]\r\n\t\tconst {userName,code}=this.state\r\n\t\treturn(\r\n\t\t\t<div className=\"home\">\r\n                <Nav \r\n                    title={userName}\r\n                    handleSelected={this.handlePop}\r\n\t\t\t\t\tpops={userPop}\r\n\t\t\t\t\tisUserpage=\"true\"\r\n                    />\r\n\t\t\t\t\t{code?<Details \r\n\t\t\t\t\t\t\t\tonRef = {this.onRef}\r\n\t\t\t\t\t\t\t\tmenuId=\"user\"\r\n\t\t\t\t\t\t\t\tcode={code}\r\n\t\t\t\t\t\t\t/>:null}\r\n                \r\n            </div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}