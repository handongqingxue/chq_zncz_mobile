{"ast":null,"code":"import \"antd-mobile/es/modal/style\";\nimport _Modal from \"antd-mobile/es/modal\";\nimport \"antd-mobile/es/list/style\";\nimport _List from \"antd-mobile/es/list\";\nimport \"antd-mobile/es/button/style\";\nimport _Button from \"antd-mobile/es/button\";\nimport \"antd-mobile/es/input-item/style\";\nimport _InputItem from \"antd-mobile/es/input-item\";\nimport _classCallCheck from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd-mobile/es/checkbox/style\";\nimport _Checkbox from \"antd-mobile/es/checkbox\";\nvar _jsxFileName = \"E:\\\\\\u6211\\u7684\\u6587\\u4EF6\\\\\\u4EBA\\u5458\\u5B9A\\u4F4D\\u7CFB\\u7EDF\\\\hclient_mobile_react\\\\src\\\\components\\\\MultiplePicker\\\\index.js\";\nimport React, { Component } from 'react';\nimport './index.less';\nvar CheckboxItem = _Checkbox.CheckboxItem;\n\nvar MultiplePicker = /*#__PURE__*/function (_Component) {\n  _inherits(MultiplePicker, _Component);\n\n  function MultiplePicker() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MultiplePicker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MultiplePicker)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      vismodal: false\n    };\n\n    _this.bodyScroll = function (e) {\n      e.preventDefault();\n    };\n\n    _this.showModal = function (formList) {\n      return function (e) {\n        document.addEventListener('touchmove', _this.bodyScroll, {\n          passive: false\n        });\n        var optionsMap = _this.props.optionsMap;\n        var fieldId = formList.fieldId,\n            value = formList.value;\n        var optdata = [];\n\n        if (optionsMap) {\n          for (var k in optionsMap) {\n            if (k === fieldId.toString()) {\n              optionsMap[k].forEach(function (it) {\n                it[\"label\"] = it.title;\n                it[\"checked\"] = false;\n              });\n              optdata = optionsMap[k];\n            }\n          }\n        }\n\n        if (value) {\n          var arrvalue = value.split(\",\");\n          optdata.forEach(function (item) {\n            arrvalue.forEach(function (it) {\n              if (item.value === it) {\n                item[\"checked\"] = true;\n              }\n            });\n          });\n        }\n\n        _this.setState({\n          optdata: optdata,\n          vismodal: true\n        });\n      };\n    };\n\n    _this.onClose = function () {\n      document.removeEventListener('touchmove', _this.bodyScroll, {\n        passive: false\n      });\n\n      _this.setState({\n        vismodal: false\n      });\n    };\n\n    _this.onCloseMul = function () {\n      var optdata = _this.state.optdata;\n      var formList = _this.props.formList;\n      var res = [];\n      optdata.forEach(function (item) {\n        if (item.checked) {\n          res.push(item.value);\n        }\n      });\n      formList.value = res.join(\",\");\n\n      _this.triggerChange(formList.value);\n\n      _this.onClose();\n    };\n\n    _this.triggerChange = function (changedValue) {\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange(changedValue);\n      }\n    };\n\n    _this.onChange = function (value) {\n      var optdata = _this.state.optdata;\n      optdata.forEach(function (item) {\n        if (item.value === value) {\n          item.checked = !item.checked;\n        }\n      });\n\n      _this.setState({\n        optdata: optdata\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(MultiplePicker, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var formList = this.props.formList;\n      var _this$state = this.state,\n          optdata = _this$state.optdata,\n          vismodal = _this$state.vismodal;\n      var title = formList.title,\n          fieldId = formList.fieldId,\n          value = formList.value;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(_InputItem, {\n        value: value,\n        onClick: this.showModal(formList),\n        placeholder: \"\\u8BF7\\u9009\\u62E9\".concat(title),\n        key: fieldId,\n        editable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }, title), /*#__PURE__*/React.createElement(_Modal, {\n        popup: true,\n        visible: vismodal,\n        onClose: this.onClose,\n        animationType: \"slide-up\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_List, {\n        renderHeader: function renderHeader() {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 47\n            }\n          }, \"\\u8BF7\\u9009\\u62E9\".concat(title));\n        },\n        className: \"popup-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"checkbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, optdata ? optdata.map(function (i) {\n        return /*#__PURE__*/React.createElement(CheckboxItem, {\n          key: i.label,\n          onChange: function onChange() {\n            return _this2.onChange(i.value);\n          },\n          defaultChecked: i.checked,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 33\n          }\n        }, i.label);\n      }) : \"\"), /*#__PURE__*/React.createElement(_List.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.onCloseMul,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 29\n        }\n      }, \"\\u786E\\u5B9A\")))));\n    }\n  }]);\n\n  return MultiplePicker;\n}(Component);\n\nexport { MultiplePicker as default };","map":{"version":3,"sources":["E:/我的文件/人员定位系统/hclient_mobile_react/src/components/MultiplePicker/index.js"],"names":["React","Component","CheckboxItem","MultiplePicker","state","vismodal","bodyScroll","e","preventDefault","showModal","formList","document","addEventListener","passive","optionsMap","props","fieldId","value","optdata","k","toString","forEach","it","title","arrvalue","split","item","setState","onClose","removeEventListener","onCloseMul","res","checked","push","join","triggerChange","changedValue","onChange","map","i","label"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport { Modal, Button, Checkbox, InputItem, List } from 'antd-mobile';\r\nimport './index.less'\r\nconst CheckboxItem = Checkbox.CheckboxItem;\r\n\r\nexport default class MultiplePicker extends Component {\r\n\r\n\tstate = {\r\n\t\tvismodal: false,\r\n\t}\r\n\tbodyScroll = (e) => {\r\n\t\te.preventDefault();\r\n\t}\r\n\tshowModal = (formList) => (e) => {\r\n\t\tdocument.addEventListener('touchmove', this.bodyScroll, {\r\n\t\t\tpassive: false\r\n\t\t})\r\n\t\tconst {optionsMap} = this.props\r\n\t\tconst {fieldId,value} = formList\r\n\t\tlet optdata = []\r\n\t\tif(optionsMap) {\r\n\t\t\tfor(let k in optionsMap) {\r\n\t\t\t\tif(k===fieldId.toString()) {\r\n\t\t\t\t\toptionsMap[k].forEach((it) => {\r\n\t\t\t\t\t\tit[\"label\"] = it.title\r\n\t\t\t\t\t\tit[\"checked\"] = false\r\n\t\t\t\t\t})\r\n\t\t\t\t\toptdata = optionsMap[k]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(value) {\r\n\t\t\tconst arrvalue = value.split(\",\")\r\n\t\t\toptdata.forEach((item) => {\r\n\t\t\t\tarrvalue.forEach((it) => {\r\n\t\t\t\t\tif(item.value === it) {\r\n\t\t\t\t\t\titem[\"checked\"] = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\toptdata,\r\n\t\t\tvismodal: true,\r\n\t\t})\r\n\t}\r\n\tonClose = () => {\r\n\t\tdocument.removeEventListener('touchmove', this.bodyScroll, {\r\n\t\t\tpassive: false\r\n\t\t})\r\n\t\tthis.setState({\r\n\t\t\tvismodal: false,\r\n\t\t});\r\n\t}\r\n\tonCloseMul = () => {\r\n\t\tconst {optdata} = this.state\r\n\t\tlet {formList} = this.props\r\n\t\tconst res = []\r\n\t\toptdata.forEach((item) => {\r\n\t\t\tif(item.checked) {\r\n\t\t\t\tres.push(item.value)\r\n\t\t\t}\r\n\t\t})\r\n\t\tformList.value = res.join(\",\")\r\n\t\tthis.triggerChange(formList.value);\r\n\t\tthis.onClose()\r\n\t}\r\n\ttriggerChange = (changedValue) => {\r\n\t\tconst onChange = this.props.onChange;\r\n\t\tif(onChange) {\r\n\t\t\tonChange(changedValue);\r\n\t\t}\r\n\t}\r\n\tonChange = (value) => {\r\n\t\tconst {optdata} = this.state\r\n\t\toptdata.forEach((item) => {\r\n\t\t\tif(item.value === value) {\r\n\t\t\t\titem.checked = !item.checked\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.setState({\r\n\t\t\toptdata\r\n\t\t})\r\n\t}\r\n\trender() {\r\n\t\tconst {formList} = this.props\r\n\t\tconst {optdata,vismodal} = this.state\r\n\t\tconst {title,fieldId,value} = formList\r\n\t\treturn(\r\n\t\t\t<div>\r\n                <InputItem\r\n                    value={value}\r\n                    onClick={this.showModal(formList)}\r\n                    placeholder={`请选择${title}`}\r\n                    key={fieldId}\r\n                    editable={false}\r\n                >{title}</InputItem>\r\n                <Modal\r\n                    popup\r\n                    visible={vismodal}\r\n                    onClose={this.onClose}\r\n                    animationType=\"slide-up\"\r\n                    >\r\n                    <List renderHeader={() => <div>{`请选择${title}`}</div>} className=\"popup-list\">\r\n                        <div className=\"checkbox\">\r\n                            {optdata?optdata.map(i => \r\n                                <CheckboxItem  \r\n                                    key={i.label} \r\n                                    onChange={() => this.onChange(i.value)} \r\n                                    defaultChecked={i.checked}\r\n                                    >\r\n                                    {i.label}\r\n                                </CheckboxItem>\r\n                            ):\"\"}\r\n                        </div>\r\n                        <List.Item>\r\n                            <Button type=\"primary\" onClick={this.onCloseMul}>确定</Button>\r\n                        </List.Item>\r\n                    </List>\r\n                </Modal>\r\n            </div>\r\n\t\t)\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}